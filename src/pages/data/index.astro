---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navbar from "../../components/Navbar.astro";
import { getCollection } from "astro:content";
import DataSourcesTable from "../../components/DataSourcesTable.astro";
import { getDataSourceFilters } from "../../utils/dataSources";

const sources = (await getCollection("data-sources")).sort((a, b) =>
  a.data.title.localeCompare(b.data.title)
);

const { regions, providers, dataTypes } = getDataSourceFilters(sources);
---

<BaseLayout title="Open Well Data Sources - Andy McDonald">
  <Navbar slot="nav" />

  <section class="section data-page">
    <h1>Open Well Data Sources</h1>
    <p class="section-lede section-lede--full">
      A directory of public well data sources, with access notes and data types.
    </p>

    <div class="data-disclaimer">
      <h2>Disclaimer</h2>
      <p>
        This site provides references and links to third-party datasets for informational purposes only. All data
        are hosted, maintained, and licensed by the original data providers. Availability, content, and quality
        may change without notice.
      </p>
      <p>
        Users access and download external data at their own risk and are responsible for verifying suitability,
        integrity, and compliance with the relevant licence and usage terms. This site makes no warranties regarding
        the accuracy, completeness, or fitness for purpose of any external datasets.
      </p>
    </div>

    <DataSourcesTable
      sources={sources}
      regions={regions}
      providers={providers}
      dataTypes={dataTypes}
    />
  </section>

  <style>
    .data-page h1 {
      margin-top: 0;
    }

    .data-disclaimer {
      margin-top: 1.5rem;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
      color: var(--muted);
      font-size: 0.85rem;
    }

    .data-disclaimer h2 {
      margin: 0 0 0.6rem;
      font-size: 0.95rem;
      color: var(--text);
    }

    .data-disclaimer p {
      margin: 0 0 0.75rem;
    }

    .data-disclaimer p:last-child {
      margin-bottom: 0;
    }
  </style>
</BaseLayout>
