<!doctype html><html lang=en-uk><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="map[]"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.andymcdonald.scot\/"},"articleSection":"blog","name":"Porosity-Permeability Relationships Using Linear Regression in Python","headline":"Porosity-Permeability Relationships Using Linear Regression in Python","description":"Once data has been collated and sorted through, the next step in the Data Science process is to carry out Exploratory Data Analysis (EDA). This step allows us to identify patterns within the data, understand relationships between the features (well logs) and identify possible outliers that may exist within the dataset.","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2020","datePublished":"2020-11-01 00:00:00 \u002b0000 UTC","dateModified":"2020-11-01 00:00:00 \u002b0000 UTC","url":"https:\/\/www.andymcdonald.scot\/blog\/2020\/2020-11-01-exploratory-data-analysis-with-well-log-data\/","wordCount":"2441","keywords":["petrophysics","python","porosity","permeability","crossplots","Blog"]}</script><title>Porosity-Permeability Relationships Using Linear Regression in Python</title><link rel="shortcut icon" href=https://www.andymcdonald.scot/images/favicon-16x16.png><link href=https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css rel=stylesheet><script defer src=https://use.fontawesome.com/releases/v5.0.11/js/all.js integrity=sha384-ImVoB8Er8knetgQakxuBS4G3RSkyD8IZVVQCAnmRJrDwqJFYUE4YOv+DbIofcO9C crossorigin=anonymous></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700"><link rel=stylesheet href=https://www.andymcdonald.scot/assets/css/main.min.7a4050c56cab53d0af53902e09fc1bdaa52ea842fc9665dbfda7a2052a02ed44.css media=all><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;400;500&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-DWZLFXGHNF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-DWZLFXGHNF')</script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=andymcdonaldgeo data-description="Support me on Buy me a coffee!" data-message="Support me on Buy Me a Coffee" data-color=#FFDD00 data-position=Right data-x_margin=18 data-y_margin=18></script></head><body class=home><header id=header><div id=head style=background-image:url(https://www.andymcdonald.scot/images/header_img.jpg),linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5))><h1 id=logo class=text-center><img class=img-circle src=https://www.andymcdonald.scot/images/andy.png alt>
<span class=title>Andy McDonald</span>
<span class=tagline2>Petrophysicist | Geoscientist | Data Scientist</span><div class=header-underline></div><div class=social-head><a href=https://www.linkedin.com/andymcdonaldgeo target=_blank><i class="fab fa-linkedin fa-1x"></i></a>
<a href=https://www.researchgate.net/profile/Andrew-Mcdonald-15 target=_blank><i class="fab fa-researchgate fa-1x"></i></a>
<a href=https://twitter.com/geoandymcd target=_blank><i class="fab fa-twitter-square fa-1x"></i></a>
<a href=https://github.com/andymcdgeo target=_blank><i class="fab fa-github-square fa-1x"></i></a>
<a href=https://andymcdonaldgeo.medium.com target=_blank><i class="fab fa-medium fa-1x"></i></a></div></h1></div><div class=landing></div><nav class="navbar navbar-default navbar-sticky"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1 aria-expanded=true>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="navbar-collapse collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=https://www.andymcdonald.scot/>Home</a></li><li><a href=https://www.andymcdonald.scot/blog/>Blog</a></li><li><a href=https://www.andymcdonald.scot/#projects>Projects</a></li><li><a href=https://www.andymcdonald.scot/publications/>Publications</a></li></ul></div></div></nav></header><main id=main><div class=container><div class="row topspace"><div class="col-sm-8 col-sm-offset-2"><article class=post><header class=entry-header><h2 class=title>Porosity-Permeability Relationships Using Linear Regression in Python</h2><div class=featured-image style=background-image:url(/images/featured/2020-11-01-%20EDA%20of%20Well%20Log%20Data.jpg)></div><div class=entry-meta><span class=posted-on><i class="far fa-calendar-alt"></i>Published on: &nbsp;November 1, 2020<i class="far fa-clock"></i> 12 min read
<span class=post-categories><i class="far fa-folder"></i><ul><li><a href=https://www.andymcdonald.scot/categories/petrophysics/>petrophysics</a></li><li><a href=https://www.andymcdonald.scot/categories/python/>python</a></li></ul></span></span></div></header><div class=row><div class=col-sm-12><div id=toc><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#loading-the-data-and-libraries>Loading the Data and Libraries</a></li><li><a href=#identifying-gaps>Identifying Gaps</a><ul><li><a href=#missingno-library>missingno Library</a></li><li><a href=#missing-data-visualisation-using-matplotlib>Missing Data Visualisation Using Matplotlib</a></li></ul></li><li><a href=#getting-familiar-with-the-data>Getting Familiar With the Data</a><ul><li><a href=#density--neutron-distribution-by-lithology>Density — Neutron Distribution by Lithology</a></li><li><a href=#density--neutron-distribution-by-lithology-and-well>Density — Neutron Distribution by Lithology and Well</a></li><li><a href=#density--neutron-distribution-by-lithology-and-geological-group>Density — Neutron Distribution by Lithology and Geological Group</a></li><li><a href=#the-seaborn-pairplot>The Seaborn PairPlot</a></li></ul></li><li><a href=#identifying-bad-hole-data>Identifying Bad Hole Data</a></li><li><a href=#conclusions>Conclusions</a></li><li><a href=#references>References</a></li></ul></nav></div></div></div><div class=entry-content><p>Once data has been collated and sorted through, the next step in the Data Science process is to carry out Exploratory Data Analysis (EDA). This step allows us to identify patterns within the data, understand relationships between the features (well logs) and identify possible outliers that may exist within the dataset. In this stage, we gain an understanding about the data and check whether further processing is required or if cleaning is necessary.</p><p>As petrophysicists/geoscientists we commonly use log plots, histograms and crossplots (scatter plots) to analyse and explore well log data. Python provides a great toolset for visualising the data from different perspectives in a quick and easy way.</p><p>In this article we will use a subset of the dataset that was released by <a href=https://xeek.ai/challenges/force-well-logs/overview>Xeek</a> and <a href=https://www.npd.no/en/force/events/>FORCE</a> as part of a competition to predict facies from well logs. We will be visualising the data using a mixture of <a href=https://matplotlib.org/>matplotlib</a>, <a href=https://seaborn.pydata.org/>seaborn </a>and <a href=https://github.com/ResidentMario/missingno>missingno</a> data visualisation libraries.</p><p>The visualisations we will cover will allow us to:</p><ul><li><p>Identify where we have or don’t have data</p></li><li><p>Understand the data distribution</p></li><li><p>Visualise data affected by bad hole conditions</p></li></ul><p>The notebook for this article can be found on my Python and Petrophysics Github series which can accessed at the link below:</p><p><a href=https://github.com/andymcdgeo/Petrophysics-Python-Series>https://github.com/andymcdgeo/Petrophysics-Python-Series</a></p><h2 id=loading-the-data-and-libraries>Loading the Data and Libraries</h2><p>The first step for any project is loading the required libraries and data.</p><p>For this workthrough, we are going to call upon a number of plotting libraries: seaborn, matplotlib and missingno as well as math, pandas, and numpy.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
    <span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
    <span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
    <span class=kn>import</span> <span class=nn>math</span>
    <span class=kn>import</span> <span class=nn>missingno</span> <span class=k>as</span> <span class=nn>msno</span>
    <span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</code></pre></div><p>The dataset we are using forms part of a Machine Learning competition run by Xeek and FORCE (<a href=https://xeek.ai/challenges/force-well-logs/overview>https://xeek.ai/challenges/force-well-logs/overview</a>). The objective of the competition was to predict lithology from a dataset consisting 98 training wells each with varying degrees of log completeness. The objective was to predict lithofacies based on the log measurements.</p><p>In order to keep the plots and data manageable in this article I have used a subset of 12 wells from the training data. The data has already been collated into a single csv file with no need to worry about curve mnemonics. To load the subset of data in we can call upon pd.read_csv.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;Data/xeek_train_subset.csv&#39;</span><span class=p>)</span>
</code></pre></div><p>Once the data has been loaded, we can confirm the number and names of the wells using the following commands:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=c1># Counts the number of unique values in the WELL column</span>
    <span class=n>data</span><span class=p>[</span><span class=s1>&#39;WELL&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>nunique</span><span class=p>()</span>
</code></pre></div><p>Which will return 12 as expected.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=c1># Gets the unique names from the WELL column</span>
    <span class=n>data</span><span class=p>[</span><span class=s1>&#39;WELL&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
</code></pre></div><p>This returns an array object with the well names.</p><pre><code>    array(['15/9-13', '15/9-15', '15/9-17', '16/1-2', '16/1-6 A', '16/10-1', '16/10-2', '16/10-3', '16/10-5', '16/11-1 ST3', '16/2-11 A', '16/2-16'], dtype=object)
</code></pre><h2 id=identifying-gaps>Identifying Gaps</h2><p>Missing data within well logging can arise for a number of reasons including:</p><ul><li><p>Tool failures & problems</p></li><li><p>Missing by choice (i.e. tools not run due to budgetary constraints)</p></li><li><p>Human error</p></li><li><p>Vintage datasets</p></li><li><p>Issues arising from the borehole environment</p></li></ul><p>There are a number of ways that we can use to identify where we have data and where we don’t. We will look at 2 ways to visualise missing data.</p><h3 id=missingno-library>missingno Library</h3><p>The first method we will look at is using the missingno library, which provides a nice little toolbox, created by Aleksy Bilgour, as a way to visualise and understand data completeness. More details on the library can be found at <a href=https://github.com/ResidentMario/missingno>https://github.com/ResidentMario/missingno</a>. If you don’t have this library, you can quickly install it using pip install missingno into your terminal.</p><p>The missingno toolbox contains a number of different visualisations, but for this article we will focus on the matrix plot and bar plot. The matrix plot can be called by:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>msno</span><span class=o>.</span><span class=n>matrix</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/15000/1*jGPlyAzKCxAQ3XXMdbYXjA.png alt="import matplotlib.pyplot as plt"></p><p>This shows us the data density across all of the features (log curves). Over on the right hand side of the figure we have sparkline, which illustrates where we have maximum or minimum nullity in the data.</p><p>From the visualisation we can can see that only a handful of columns are complete WELL, DEPTH_MD, GR, GROUP, LITHOFACIES_LITHOLOGY and LITHOFACIES_CONFIDENCE.</p><p>Others have near full data values such DTC, CALI, and ROP, whereas some have very poor data coverage such as RMIC, SGR and ROPA.</p><p>We can also call upon msno.bar(data) to generate a bar chart showing the amount of non-null data values within each column (log curve). Along the top of the chart, we get a total count of the non-null data values.</p><p><img src=https://cdn-images-1.medium.com/max/14400/1*sXC4n3L_ImUFpgASq9uQ5Q.png alt="Missing value counts from msno.bar(data)."></p><p>With a quick glance at the matrix plot and bar chart, you can get a sense of what data is missing from your dataset, especially if you have a large number of columns in your dataset.</p><h3 id=missing-data-visualisation-using-matplotlib>Missing Data Visualisation Using Matplotlib</h3><p>In my previous article: <a href=https://towardsdatascience.com/visualising-well-data-coverage-using-matplotlib-f30591c89754>Visualising Well Data Coverage Using Matplotlib</a> I covered a method of viewing the data coverage on a well by well basis. This allows you to see where the gaps are in your key curves.</p><p>If we wanted to generate a plot for all of the curves per well we could save each one out as a file or present the data in a single column. In this example, I have only selected common curves that a petrophysicist may use in an interpretation.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>data_nan</span> <span class=o>=</span> <span class=n>data</span><span class=p>[[</span><span class=s1>&#39;WELL&#39;</span><span class=p>,</span><span class=s1>&#39;DEPTH_MD&#39;</span><span class=p>,</span><span class=s1>&#39;CALI&#39;</span><span class=p>,</span> <span class=s1>&#39;BS&#39;</span><span class=p>,</span> <span class=s1>&#39;GR&#39;</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=s1>&#39;PEF&#39;</span><span class=p>,</span> <span class=s1>&#39;RDEP&#39;</span><span class=p>,</span> <span class=s1>&#39;RMED&#39;</span><span class=p>,</span> <span class=s1>&#39;DTC&#39;</span><span class=p>,</span> <span class=s1>&#39;DTS&#39;</span><span class=p>]]</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>num</span><span class=p>,</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>data_nan</span><span class=o>.</span><span class=n>columns</span><span class=p>[</span><span class=mi>2</span><span class=p>:]):</span>
        <span class=n>data_nan</span><span class=p>[</span><span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>data_nan</span><span class=p>[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>notnull</span><span class=p>()</span> <span class=o>*</span> <span class=p>(</span><span class=n>num</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <span class=n>data_nan</span><span class=p>[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>num</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>col</span><span class=p>,</span> <span class=n>num</span><span class=p>)</span> <span class=c1>#Print out the col name and number to verify it works</span>
    <span class=n>grouped</span> <span class=o>=</span> <span class=n>data_nan</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;WELL&#39;</span><span class=p>)</span>

    <span class=c1>#Setup the labels we want to display on the x-axis</span>
    <span class=n>labels</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;CALI&#39;</span><span class=p>,</span> <span class=s1>&#39;BS&#39;</span><span class=p>,</span> <span class=s1>&#39;GR&#39;</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=s1>&#39;PEF&#39;</span><span class=p>,</span> <span class=s1>&#39;RDEP&#39;</span><span class=p>,</span> <span class=s1>&#39;RMED&#39;</span><span class=p>,</span> <span class=s1>&#39;DTC&#39;</span><span class=p>,</span> <span class=s1>&#39;DTS&#39;</span><span class=p>]</span>

    <span class=c1>#Setup the figure and the subplots</span>
    <span class=n>fig</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>))</span>

    <span class=c1>#Loop through each well and column in the grouped dataframe</span>
    <span class=k>for</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>df</span><span class=p>),</span> <span class=n>ax</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>grouped</span><span class=p>,</span> <span class=n>axs</span><span class=o>.</span><span class=n>flat</span><span class=p>):</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>9</span><span class=p>)</span>
        
        <span class=c1>#Setup the depth range</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=mi>5000</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        
        <span class=c1>#Create multiple fill betweens for each curve# This is between</span>
        <span class=c1># the number representing null values and the number representing</span>
        <span class=c1># actual values</span>
        
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>CALI</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;grey&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>BS</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;lightgrey&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>GR</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;mediumseagreen&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>NPHI</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;lightblue&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>RHOB</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;lightcoral&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>PEF</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;violet&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>RDEP</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;darksalmon&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>RMED</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;wheat&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>DTC</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;thistle&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>fill_betweenx</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>DEPTH_MD</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=n>df</span><span class=o>.</span><span class=n>DTS</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s1>&#39;tan&#39;</span><span class=p>)</span>
        
        <span class=c1>#Setup the grid, axis labels and ticks</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;black&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;DEPTH (m)&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>14</span><span class=p>,</span> <span class=n>fontweight</span><span class=o>=</span><span class=s1>&#39;bold&#39;</span><span class=p>)</span>
        
        <span class=c1>#Position vertical lines at the boundaries between the bars</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xticks</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>],</span> <span class=n>minor</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
        
        <span class=c1>#Position the curve names in the centre of each column</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xticks</span><span class=p>([</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>1.5</span> <span class=p>,</span><span class=mf>2.5</span> <span class=p>,</span><span class=mf>3.5</span> <span class=p>,</span><span class=mf>4.5</span> <span class=p>,</span><span class=mf>5.5</span> <span class=p>,</span><span class=mf>6.5</span> <span class=p>,</span> <span class=mf>7.5</span><span class=p>,</span> <span class=mf>8.5</span><span class=p>,</span> <span class=mf>9.5</span><span class=p>],</span> <span class=n>minor</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        
        <span class=c1>#Setup the x-axis tick labels</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xticklabels</span><span class=p>(</span><span class=n>labels</span><span class=p>,</span>  <span class=n>rotation</span><span class=o>=</span><span class=s1>&#39;vertical&#39;</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verticalalignment</span><span class=o>=</span><span class=s1>&#39;bottom&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xticklabels</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>tick_params</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=n>which</span><span class=o>=</span><span class=s1>&#39;minor&#39;</span><span class=p>,</span> <span class=n>pad</span><span class=o>=-</span><span class=mi>10</span><span class=p>)</span>
        
        <span class=c1>#Assign the well name as the title to each subplot</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>16</span><span class=p>,</span> <span class=n>fontweight</span><span class=o>=</span><span class=s1>&#39;bold&#39;</span><span class=p>)</span>

    <span class=n>plt</span><span class=o>.</span><span class=n>savefig</span><span class=p>(</span><span class=s1>&#39;missingdata.png&#39;</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>subplots_adjust</span><span class=p>(</span><span class=n>hspace</span><span class=o>=</span><span class=mf>0.15</span><span class=p>,</span> <span class=n>wspace</span><span class=o>=</span><span class=mf>0.25</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/12000/1*WFuf60EPHEZMqaPUeHdhBg.png alt="Multi-well plot showing data coverage per well within the dataset."></p><p>From the generated image, we can identify where the gaps are in our main curves. From this plot we can determine which wells would be useful to carry forward for machine learning modelling or for further investigation.</p><h2 id=getting-familiar-with-the-data>Getting Familiar With the Data</h2><p>In this section, we will look at a number of visualisations that can be used to gain insight into our data and how that data relations to lithofacies and geological stratigraphy.</p><p>There are multiple plotting and data visualisation libraries with the Python world. One of these is <a href=https://seaborn.pydata.org>Seaborn</a>, which is a data visualisation library built on top of <a href=https://matplotlib.org/>matplotlib</a> and works closely with <a href=https://pandas.pydata.org/>pandas</a>. It provides an easy and more intuitive way to display and explore your data.</p><p>The following examples illustrate a few different plots that can be used to quickly gain insight into your data using a mixture of FacetGrid and matplotlib.</p><h3 id=density--neutron-distribution-by-lithology>Density — Neutron Distribution by Lithology</h3><p>FacetGrid provides an easier and smoother way of plotting multiple subplots in a grid using a small amount of code compared to matplotlib.</p><p>Before we can use our data, we first have to convert our numeric lithology data to actual descriptive labels. This is achieved by using a simple dictionary:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>lithology_numbers</span> <span class=o>=</span> <span class=p>{</span><span class=mi>30000</span><span class=p>:</span> <span class=s1>&#39;Sandstone&#39;</span><span class=p>,</span>
                     <span class=mi>65030</span><span class=p>:</span> <span class=s1>&#39;Sandstone/Shale&#39;</span><span class=p>,</span>
                     <span class=mi>65000</span><span class=p>:</span> <span class=s1>&#39;Shale&#39;</span><span class=p>,</span>
                     <span class=mi>80000</span><span class=p>:</span> <span class=s1>&#39;Marl&#39;</span><span class=p>,</span>
                     <span class=mi>74000</span><span class=p>:</span> <span class=s1>&#39;Dolomite&#39;</span><span class=p>,</span>
                     <span class=mi>70000</span><span class=p>:</span> <span class=s1>&#39;Limestone&#39;</span><span class=p>,</span>
                     <span class=mi>70032</span><span class=p>:</span> <span class=s1>&#39;Chalk&#39;</span><span class=p>,</span>
                     <span class=mi>88000</span><span class=p>:</span> <span class=s1>&#39;Halite&#39;</span><span class=p>,</span>
                     <span class=mi>86000</span><span class=p>:</span> <span class=s1>&#39;Anhydrite&#39;</span><span class=p>,</span>
                     <span class=mi>99000</span><span class=p>:</span> <span class=s1>&#39;Tuff&#39;</span><span class=p>,</span>
                     <span class=mi>90000</span><span class=p>:</span> <span class=s1>&#39;Coal&#39;</span><span class=p>,</span>
                     <span class=mi>93000</span><span class=p>:</span> <span class=s1>&#39;Basement&#39;</span><span class=p>}</span>
</code></pre></div><p>In our dataframe, we create a new column called LITH and using the map function we can quickly get our descriptive labels like so:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>data</span><span class=p>[</span><span class=s1>&#39;LITH&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s1>&#39;FORCE_2020_LITHOFACIES_LITHOLOGY&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>lithology_numbers</span><span class=p>)</span>
</code></pre></div><p>For the first FacetGrid, we will look at the density-neutron data by formation. When we do this we only need to specify a few lines of code as opposed to multiple lines or using a for loop as seen in the example above with missing data. We can initialise the FacetGrid with the density neutron data and passing the LITH column into the col parameter. Additionally, we can use the col_wrap parameter to specify how many columns we want on our grid.</p><p>Finally, as we are familiar with working with density-neutron data on crossplots using certain scales we need to set the xlim and ylim accordingly, otherwise it will autoscale.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>g</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>FacetGrid</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=s1>&#39;LITH&#39;</span><span class=p>,</span> <span class=n>col_wrap</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>xlim</span><span class=o>=</span><span class=p>(</span><span class=o>-</span><span class=mf>0.15</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>ylim</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/7172/1*1xcVh1H8_wf1PHUCTP78rA.png alt="FacetGrid of density-neutron data split by lithology."></p><p>This will generate a series of mini scatterplots/crossplots of the density-neutron data split by lithology. You can see from the code above, all we had to specify were the type of plot, the axes and setting the axis limits, and from this we have a nice plot we can use right away.</p><h3 id=density--neutron-distribution-by-lithology-and-well>Density — Neutron Distribution by Lithology and Well</h3><p>We can further enhance the density neutron data by looking at the lithology distribution across multiple wells. Using the converted LITH data column we can create shading for different lithology types by supplying LITH to the hue parameter. We can then supply the WELL column from the dataframe into the col parameter.</p><p>The marker can be changed by supplying a value to the marker and size parameters. This will help clean up the plots so we can see more of the data.</p><p>Finally, as we are using a hue, we can automatically generate a legend using add_legend().</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>g</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>FacetGrid</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=s1>&#39;WELL&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;LITH&#39;</span><span class=p>,</span> <span class=n>col_wrap</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=n>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>marker</span><span class=o>=</span><span class=s1>&#39;+&#39;</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>xlim</span><span class=o>=</span><span class=p>(</span><span class=o>-</span><span class=mf>0.15</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>ylim</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>g</span><span class=o>.</span><span class=n>add_legend</span><span class=p>()</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/8120/1*IhIiscG1fJfxed5OhV6O3g.png alt="FacetGrid of density-neutron data split by well and coloured by lithology."></p><h3 id=density--neutron-distribution-by-lithology-and-geological-group>Density — Neutron Distribution by Lithology and Geological Group</h3><p>We can easily swap out the grouping option for the geological GROUP column to view the lithology variation by group.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>g</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>FacetGrid</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=s1>&#39;GROUP&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;LITH&#39;</span><span class=p>,</span> <span class=n>col_wrap</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=n>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>marker</span><span class=o>=</span><span class=s1>&#39;+&#39;</span><span class=p>)</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>xlim</span><span class=o>=</span><span class=p>(</span><span class=o>-</span><span class=mf>0.15</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>g</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>ylim</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>g</span><span class=o>.</span><span class=n>add_legend</span><span class=p>()</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/8120/1*ilv7KNYjWNxPKLDHVW8New.png alt="FacetGrid of density-neutron data split by geological group and coloured by lithology"></p><p>From this chart, we can quickly see that the Rotliegendes Gp is primarily sandstone and that the Nordaland Gp is a mixture of Shale and Sandstone/Shale lithologies.</p><h3 id=the-seaborn-pairplot>The Seaborn PairPlot</h3><p>The Seaborn library also has a very powerful visualisation known as a pairplot which can be called through a single line of code. This allows us to compare, on a grid, multiple columns/measurements against each other. The equivalent code in matplotlib would extend several lines.</p><p>Prior to displaying the pairplot we need to modify the data we are using. Firstly, we will work with a subset of the data consisting of some commonly used well logs. If we used all of the columns in the example for this article, we would be unable to view the details. Secondly, we need to drop any missing data values, otherwise issues can arise when plotting.</p><p>To create a list of the curves we want:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>key_logs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;CALI&#39;</span><span class=p>,</span> <span class=s1>&#39;GR&#39;</span><span class=p>,</span> <span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=s1>&#39;PEF&#39;</span><span class=p>,</span> <span class=s1>&#39;RDEP&#39;</span><span class=p>,</span> <span class=s1>&#39;RMED&#39;</span><span class=p>,</span> <span class=s1>&#39;DTC&#39;</span><span class=p>,</span> <span class=s1>&#39;DTS&#39;</span><span class=p>]</span>
</code></pre></div><p>We can then take a subset of our data:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>subset</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=n>key_logs</span><span class=p>]</span>
    <span class=n>subset</span> <span class=o>=</span> <span class=n>subset</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
</code></pre></div><p>Once we have the list of key curves we can pass it in to the vars argument in the pair plot.</p><pre><code>sns.pairplot(subset, vars=key_logs, diag_kind='hist', plot_kws={'alpha':0.6, 'edgecolor':'k'})
</code></pre><p><img src=https://cdn-images-1.medium.com/max/13456/1*9MPcjELmeaQqAf-XZOpzzQ.png alt="Pairplot of our well data. Histograms are along the diagonal for the distribution of each log curve."></p><p>This produces multiple scatter plots with a histogram of each of the curves along the diagonal. As you can see this allows us to quickly understand how data is distributed and correlated between the different logging curves. A very powerful plot!</p><h2 id=identifying-bad-hole-data>Identifying Bad Hole Data</h2><p>In this section we will briefly look at a way to visualise where we have badhole data caused by borehole enlargement. Deterioration of the borehole wall can happen for a number of different reasons including undercompacted rocks and variations in stresses acting on those rocks such as variations in mud weight.</p><p>As identified in the missing data section only 10 of our wells have a bitsize curve. Therefore, 2 wells will not be plotted. We can use the bitsize curve alongside the caliper curve to create a difference caliper. Negative numbers indicate the borehole has shrunk in size (e.g. shale swelling) and positive numbers indicate the borehole has increased in size.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>data</span><span class=p>[</span><span class=s1>&#39;DIF_CAL&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s1>&#39;CALI&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>data</span><span class=p>[</span><span class=s1>&#39;BS&#39;</span><span class=p>]</span>
</code></pre></div><p>As we will be using matplotlib for these plots we first need to group the dataframe by WELL:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>grouped</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;WELL&#39;</span><span class=p>)</span>
</code></pre></div><p>Then calculate the number of rows we need for our plot:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>nrows</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>grouped</span><span class=p>)</span><span class=o>/</span><span class=mf>3.</span><span class=p>))</span>
</code></pre></div><p>Finally, we can use a small for loop to go through each well and add a subplot of density vs neutron to our figure. The c argument in df.plot allows us to specify a column in our dataframe to colour the data. In this case we will use the DIF_CAL data we calculated.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=n>fig</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>nrows</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>))</span>
    <span class=k>for</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>df</span><span class=p>),</span> <span class=n>ax</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>grouped</span><span class=p>,</span> <span class=n>axs</span><span class=o>.</span><span class=n>flat</span><span class=p>):</span>
        <span class=n>df</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=s1>&#39;DIF_CAL&#39;</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><span class=s1>&#39;jet&#39;</span><span class=p>,</span> <span class=n>vmin</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>vmax</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>(</span><span class=o>-</span><span class=mf>0.15</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/2836/1*3sSSSxrSGEEerlD__AcWNQ.png alt="Multi-well plot of the density-neutron log data coloured by a calculated difference caliper curve."></p><p>From a quick glance we can see that we may have issues with the data in two of the wells: 15/9–15 and 16/1–2. These should then be investigated further.</p><p>We can also apply the same idea to our lithologies. If we find that a lithology is badly affected by badhole conditions, there could be potential consequences when attempting to predict that lithology using machine learning algorithms.</p><p>To do this, we group the data by LITH and use the same plotting logic as above.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>    <span class=c1># Determine number of rows</span>
    <span class=n>nrows</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>grouped</span><span class=p>)</span><span class=o>/</span><span class=mf>3.</span><span class=p>))</span>

    <span class=c1># Group our data</span>
    <span class=n>grouped_lith</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;LITH&#39;</span><span class=p>)</span>

    <span class=c1># Plot our data</span>
    <span class=n>fig</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>nrows</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>))</span>
    <span class=k>for</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>df</span><span class=p>),</span> <span class=n>ax</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>grouped_lith</span><span class=p>,</span> <span class=n>axs</span><span class=o>.</span><span class=n>flat</span><span class=p>):</span>
        <span class=n>df</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=s1>&#39;NPHI&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;RHOB&#39;</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=s1>&#39;DIF_CAL&#39;</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><span class=s1>&#39;jet&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>,</span> <span class=n>vmin</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>vmax</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>(</span><span class=o>-</span><span class=mf>0.05</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/2864/1*z5MDyPTqE2W5Fc4ZqmilhA.png alt="Multi-well plot of the density-neutron log data split by lithology and coloured by a calculated difference caliper curve."></p><p>From the plot, we can see that all lithologies have a large degree of ‘good’ data in them.</p><h2 id=conclusions>Conclusions</h2><p>In this article, we have covered some of thee ways in which you can explore and visualise well log data using common Python libraries. We have seen how to use Seaborn to quickly plot multiple datasets on single figures and split that data by wells and lithology. We have also seen how to quickly identify missing data and data affected by badhole conditions.</p><p>Exploring your data is a great way to become familiar with it and understand it, especially prior to carrying out machine learning or further interpretation.</p><h2 id=references>References</h2><p>Bormann P., Aursand P., Dilib F., Dischington P., Manral S. 2020. 2020 FORCE Machine Learning Contest. <a href=https://github.com/bolgebrygg/Force-2020-Machine-Learning-competition>https://github.com/bolgebrygg/Force-2020-Machine-Learning-competition</a></p><p>FORCE: Machine Predicted Lithology: <a href=https://xeek.ai/challenges/force-well-logs/overview>https://xeek.ai/challenges/force-well-logs/overview</a></p></div></article></div></div><div class=row><div class="col-sm-8 col-sm-offset-2"><div id=share><style>#share-buttons{display:inline-block;vertical-align:middle}#share-buttons:after{content:"";display:block;clear:both}#share-buttons>div{position:relative;text-align:left;height:36px;width:32px;float:left;text-align:center}#share-buttons>div>svg{height:16px;fill:#d5d5d5;margin-top:10px}#share-buttons>div:hover{cursor:pointer}#share-buttons>div.facebook:hover>svg{fill:#3b5998}#share-buttons>div.twitter:hover>svg{fill:#55acee}#share-buttons>div.linkedin:hover>svg{fill:#0077b5}#share-buttons>div.pinterest:hover>svg{fill:#cb2027}#share-buttons>div.gplus:hover>svg{fill:#dd4b39}#share-buttons>div.mail:hover>svg{fill:#7d7d7d}#share-buttons>div.instagram:hover>svg{fill:#c73b92}#share-buttons>div.facebook>svg{height:18px;margin-top:9px}#share-buttons>div.twitter>svg{height:20px;margin-top:8px}#share-buttons>div.linkedin>svg{height:19px;margin-top:7px}#share-buttons>div.pinterest>svg{height:20px;margin-top:9px}#share-buttons>div.gplus>svg{height:17px;margin-top:9px;position:relative;left:1px}#share-buttons>div.mail>svg{height:14px;margin-top:11px}</style><span style=color:silver>Share on:</span><div id=share-buttons><div class=facebook title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://www.andymcdonald.scot/blog/2020/2020-11-01-exploratory-data-analysis-with-well-log-data/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"/></svg></div><div class=twitter title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=https://www.andymcdonald.scot/blog/2020/2020-11-01-exploratory-data-analysis-with-well-log-data/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div><div class=linkedin title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://www.andymcdonald.scot/blog/2020/2020-11-01-exploratory-data-analysis-with-well-log-data/&title=&summary=&source=')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"/></svg></div><div class=gplus title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=https://www.andymcdonald.scot/blog/2020/2020-11-01-exploratory-data-analysis-with-well-log-data/')"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234T0 896t58-285 156-234 234-156 285-58q286 0 491 192l-199 191Q908 433 733 433q-123 0-227.5 62T340 663.5 279 896t61 232.5T505.5 1297t227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74H733V791h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209V791h209V582h210v209h209z"/></svg></div><div class=mail title="Share this through Email" onclick="window.open('mailto:?&body=https://www.andymcdonald.scot/blog/2020/2020-11-01-exploratory-data-analysis-with-well-log-data/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47H160q-66 0-113-47T0 1504V710q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 1e2-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38T639 1015q-91-64-262-182.5T172 690q-62-42-117-115.5T0 438q0-78 41.5-130T160 256h1472q65 0 112.5 47t47.5 113z"/></svg></div></div></div></div></div><div class=clearfix></div><div class=row><div class="col-sm-8 col-sm-offset-2"><div id=comments><div id=disqus_thread></div><script>(function(){var a=document,b=a.createElement('script');b.src='https:///embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div><div class=clearfix></div></div></main><footer id=underfooter><div class=container><div class=row><div class=social-footer><div class=col-md-12><p class=text-center><a href=https://www.linkedin.com/andymcdonaldgeo target=_blank><i class="fab fa-linkedin fa-1x"></i></a>
<a href=https://www.researchgate.net/profile/Andrew-Mcdonald-15 target=_blank><i class="fab fa-researchgate fa-1x"></i></a>
<a href=https://twitter.com/geoandymcd target=_blank><i class="fab fa-twitter-square fa-1x"></i></a>
<a href=https://github.com/andymcdgeo target=_blank><i class="fab fa-github-square fa-1x"></i></a>
<a href=https://andymcdonaldgeo.medium.com target=_blank><i class="fab fa-medium fa-1x"></i></a></p></div></div></div><div class=row><div class=col-md-12><div class=widget-body><p class=text-center>Copyright &copy; 2021, Andy McDonald<br>Powered by: <a href=https://gohugo.io/ rel=poweredby>Hugo</a></p></div></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js></script><script src=https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.0/jquery.waypoints.min.js></script><script src=https://www.andymcdonald.scot/js/bundle.min.00e4b79049366199ff1b6ac7cbd8302877370d1bf4ff0db6be4c4190e2e43f9143709df60bd35ed5c6f6495ad18afc509d468b7be1665c90f32b62afa4c7114c.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-DWZLFXGHNF"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-DWZLFXGHNF')</script></body></html></body></html>