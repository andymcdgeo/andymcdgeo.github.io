<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/www.andymcdonald.scot\/","author":{"@type":"Person","name":"Andy McDonald","image":"https://www.andymcdonald.scot/images/andy2.png"},"name":"Andy McDonald","description":"A look into a Python library dedicated to loading, exploring and plotting well log LAS files.","url":"https:\/\/www.andymcdonald.scot\/blog\/2021\/2021-06-13-exploring-well-log-data-using-the-welly-python-library\/","keywords":"[]"}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.98.0 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Andy McDonald"><meta name=keywords content><meta name=description content="A look into a Python library dedicated to loading, exploring and plotting well log LAS files."><meta property="og:description" content="A look into a Python library dedicated to loading, exploring and plotting well log LAS files."><meta property="og:type" content="article"><meta property="og:title" content="Exploring Well Log Data Using the Welly Python Library"><meta name=twitter:title content="Exploring Well Log Data Using the Welly Python Library"><meta property="og:url" content="https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/"><meta property="twitter:url" content="https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/"><meta property="og:site_name" content="Andy McDonald"><meta property="og:description" content="A look into a Python library dedicated to loading, exploring and plotting well log LAS files."><meta name=twitter:description content="A look into a Python library dedicated to loading, exploring and plotting well log LAS files."><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-06-13T00:00:00"><meta property="article:modified_time" content="2021-06-13T00:00:00"><meta property="article:section" content="Python"><meta property="article:section" content="Petrophysics"><meta property="article:tag" content="libraries"><meta property="article:tag" content="data-quality"><meta property="article:tag" content="data-visualisation"><meta property="article:tag" content="las-files"><meta name=twitter:card content="summary"><meta property="og:image" content="https://www.andymcdonald.scot/images/andy2.png"><meta property="twitter:image" content="https://www.andymcdonald.scot/images/andy2.png"><title>Exploring Well Log Data Using the Welly Python Library</title><link rel=icon href=https://www.andymcdonald.scot/favicon.png><link rel=canonical href=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://www.andymcdonald.scot/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=2><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://www.andymcdonald.scot/ aria-label="Go to homepage">Andy McDonald</a></div><a class=header-right-picture href=https://www.andymcdonald.scot/#about aria-label="Open the link: /#about"><img class=header-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a></header><nav id=sidebar data-behavior=2><div class=sidebar-container><div class=sidebar-profile><a href=https://www.andymcdonald.scot/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Andy McDonald</h4><h5 class=sidebar-profile-bio>Super bio with markdown support <strong>COOL</strong></h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/blog title=Blog><i class="sidebar-button-icon fas fa-lg fa-server" aria-hidden=true></i>
<span class=sidebar-button-desc>Blog</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/publications title=Publications><i class="sidebar-button-icon fas fa-lg fa-book" aria-hidden=true></i>
<span class=sidebar-button-desc>Publications</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/andymcdgeo target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/andymcdonaldgeo/ target=_blank rel=noopener title=LinkedIn><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>LinkedIn</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://medium.com/@andymcdonaldgeo target=_blank rel=noopener title=Medium><i class="sidebar-button-icon fab fa-lg fa-medium" aria-hidden=true></i>
<span class=sidebar-button-desc>Medium</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.youtube.com/c/AndyMcDonald42 target=_blank rel=noopener title=YouTube><i class="sidebar-button-icon fab fa-lg fa-youtube" aria-hidden=true></i>
<span class=sidebar-button-desc>YouTube</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=2 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>Exploring Well Log Data Using the Welly Python Library</h1><div class="postShorten-meta post-meta"><time datetime=2021-06-13T00:00:00Z>June 13, 2021</time>
<span>in</span>
<a class=category-link href=https://www.andymcdonald.scot/categories/python>Python</a>,
<a class=category-link href=https://www.andymcdonald.scot/categories/petrophysics>Petrophysics</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>The welly library was developed by Agile Geoscience to help with loading, processing and analysing well log data from a single well or multiple wells. The library allows exploration of the meta data found within the headers of las files and also contains a plotting function to display a typical well log. Additionally, the welly library contains tools for identifying and handling data quality issues.</p><p>The Welly library can be found at the Agile Geoscience GitHub at <a href=https://github.com/agile-geoscience/welly>https://github.com/agile-geoscience/welly</a></p><p>In this short tutorial we will see how to load a well from the Volve field and exploring some of the functionality available within this library.</p><h3 id=the-dataset>The Dataset</h3><p>The dataset we are using comes from the publicly available Equinor Volve Field dataset released in 2018. The file used in this tutorial is from well 15/19-F1B. Details on the Volve Dataset can be found <a href=https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html>here</a>.</p><p>This tutorial forms part of my Python and Petrophysics series. Links to previous articles can be found <a href=https://www.andymcdonald.scot/portfolio/proj_python_petrophysics/>here</a>.</p><p>The notebook accompanying this article can found within the GitHub Repository at: <a href=https://github.com/andymcdgeo/Petrophysics-Python-Series>https://github.com/andymcdgeo/Petrophysics-Python-Series</a></p><h3 id=importing-libraries-and-data>Importing Libraries and Data</h3><p>The first step in this tutorial will be to load in the required modules, Well and Curve, from the Welly libray. These modules are used to work with well log data and with individual curves.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> welly <span style=color:#f92672>import</span> Well
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> welly <span style=color:#f92672>import</span> Curve
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span></code></pre></div><p>Our LAS file can be loaded in using the Well.from_las() method. This will create a new well object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well <span style=color:#f92672>=</span> Well<span style=color:#f92672>.</span>from_las(<span style=color:#e6db74>&#39;Data/15_19_F1B_WLC_PETRO_COMPUTED_INPUT_1.LAS&#39;</span>)
</span></span></code></pre></div><h2 id=data-exploration>Data Exploration</h2><h3 id=file-and-well-information>File and Well Information</h3><p>Now that our data has been loaded in we can begin exploring the contents and meta data for the selected well. If we call upon our well object we will be presented with a summary table which contains the wellname, location, co-ordinates, and a list of curve mnemonics.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_1.png alt></p><p>We can also call upon specific functions to access the required information.</p><p>The first is the header which will return key header information, including the well name, Unique Well Identifier (UWI), the field name and company name.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well<span style=color:#f92672>.</span>header
</span></span></code></pre></div><p>This returns:</p><pre><code>{'name': '15/9-F-1 B', 'uwi': '', 'field': 'VOLVE', 'company': 'Statoil Petroleum'}
</code></pre><p>Let’s now have a look at the location information for this well. To do so we can call upon the .location method for our data object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well<span style=color:#f92672>.</span>location
</span></span></code></pre></div><p>This returns a location object in the form of a dictionary.</p><pre><code>Location({'position': None, 'crs': CRS({}), 'location': 'Maersk Inspirer', 'country': '', 'province': '', 'county': '', 'latitude': '058 26\' 29.907&quot; N    DMS', 'longitude': '001 53\' 14.708&quot; E    DMS', 'api': '', 'td': None, 'deviation': None})
</code></pre><p>The file we are using does not contain much information about the location of the well, but we do have information about the latitude and longitude. These can be extracted by appending .latitude and .longitude to the location method and put into an easier to read format.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>lati <span style=color:#f92672>=</span> well<span style=color:#f92672>.</span>location<span style=color:#f92672>.</span>latitude
</span></span><span style=display:flex><span>long <span style=color:#f92672>=</span> well<span style=color:#f92672>.</span>location<span style=color:#f92672>.</span>longitude
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>print(lati)
</span></span><span style=display:flex><span>print(long)
</span></span></code></pre></div><p>Using the print function for these methods provides a nicer output to read.</p><pre><code>058 26' 29.907&quot; N    DMS
001 53' 14.708&quot; E    DMS
</code></pre><h3 id=exploring-the-data>Exploring the Data</h3><p>We saw in the previous section when looking at the well header that we had a number of curves. We can get an idea of how many by calling up on the count_curves() function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well<span style=color:#f92672>.</span>count_curves()
</span></span></code></pre></div><p>This returns a total count of 22 curves.</p><p>We can also obtain a list of the curve menmonics within the las file using the method _get_curve_menmonics().</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well<span style=color:#f92672>.</span>_get_curve_mnemonics()
</span></span></code></pre></div><p>This returns a list of all mnemonics within the las file.</p><pre><code>['ABDCQF01',
 'ABDCQF02',
 'ABDCQF03',
 'ABDCQF04',
 'BS',
 'CALI',
 'DRHO',
 'DT',
 'DTS',
 'GR',
 'NBGRCFM',
 'NPHI',
 'PEF',
 'RACEHM',
 'RACELM',
 'RD',
 'RHOB',
 'RM',
 'ROP',
 'RPCEHM',
 'RPCELM',
 'RT']
</code></pre><p>Another way to view all of the curves is by calling upon .data. This returns a dictionary object containing the well name, along with the first 3 and the last 3 values for that curve.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>well<span style=color:#f92672>.</span>data
</span></span></code></pre></div><p>As seen in the example below, many of the first and last values are listed as nan, which stands for Not a Number.</p><pre><code>{'ABDCQF01': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'ABDCQF02': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'ABDCQF03': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'ABDCQF04': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'BS': Curve([36. , 36. , 36. , ...,  8.5,  8.5,  8.5]),
 'CALI': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'DRHO': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'DT': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'DTS': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'GR': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'NBGRCFM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'NPHI': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'PEF': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RACEHM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RACELM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RD': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RHOB': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'ROP': Curve([    nan,     nan,     nan, ..., 29.9699, 29.9903,     nan]),
 'RPCEHM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RPCELM': Curve([nan, nan, nan, ..., nan, nan, nan]),
 'RT': Curve([nan, nan, nan, ..., nan, nan, nan])}
</code></pre><p>We can delve a little deeper into each of the curves within the las file by passing in the name of the curve like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    well<span style=color:#f92672>.</span>data[<span style=color:#e6db74>&#39;GR&#39;</span>]
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_2.png alt></p><p>This provides us with some summary statistics of the curve, such as:</p><ul><li><p>what the null value is</p></li><li><p>the curve units</p></li><li><p>the curve data range</p></li><li><p>the step value of the data</p></li><li><p>the total number of samples</p></li><li><p>the total number of missing values (NaNs)</p></li><li><p>Min, Max and Mean of the curve</p></li><li><p>Curve description</p></li><li><p>A list of the first 3 and last 3 values</p></li></ul><h2 id=data-qc>Data QC</h2><p>Checking the quality of well log data is an important part of the petrophysics workflow.</p><p>The borehole environment can be a hostile place with high temperatures, high pressures, irregular borehole shapes etc all of which can have an impact on the logging measurements. This can result in numerous issues such as missing values, outliers, constant values and erroneous values.</p><p>The welly library comes with a number of quality control checks which will allow us to check all of the data or specific curves for issues.</p><p>The quality control checks include:</p><ul><li><p>Checking for gaps / missing values : .no_nans(curve)</p></li><li><p>Checking if the entire curve is empty or not : .not_empty(curve)</p></li><li><p>Checking if the curve contains constant values : .no_flat(curve)</p></li><li><p>Checking units: check_units(list_of_units)</p></li><li><p>Checking if values are all positive : all_positive(curve)</p></li><li><p>Checking if curve is within a range : all_between(min_value, max_value)</p></li></ul><p>The full list of methods can be found within the Welly help documents at: <a href=https://welly.readthedocs.io>https://welly.readthedocs.io</a></p><p>Before we start we will need to import the quality module like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>import</span> welly.quality <span style=color:#66d9ef>as</span> wq
</span></span></code></pre></div><p>Before we run any quality checks we first need to create a list of what tests we want to run and on what data we want to run those tests.</p><p>To do this we can build up a dictionary, with the key being the curve(s) we want to run the checks on. If want to run it on all of the curves we need to use the key Each.</p><p>For every curve we will check if there are any flatline values, any gaps and making sure the curve is not empty. For the gamma ray (GR) and bulk density (RHOB) curves we are going to check that all of the values are positive, that they are between standard ranges and that the units are what we expect them to be.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    tests <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;Each&#39;</span>: [wq<span style=color:#f92672>.</span>no_flat,
</span></span><span style=display:flex><span>                     wq<span style=color:#f92672>.</span>no_gaps,
</span></span><span style=display:flex><span>                     wq<span style=color:#f92672>.</span>not_empty],
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;GR&#39;</span>: [
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>all_positive,
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>all_between(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>250</span>),
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>check_units([<span style=color:#e6db74>&#39;API&#39;</span>, <span style=color:#e6db74>&#39;GAPI&#39;</span>]),
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;RHOB&#39;</span>: [
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>all_positive,
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>all_between(<span style=color:#ae81ff>1.5</span>, <span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>                    wq<span style=color:#f92672>.</span>check_units([<span style=color:#e6db74>&#39;G/CC&#39;</span>, <span style=color:#e6db74>&#39;g/cm3&#39;</span>]),
</span></span><span style=display:flex><span>            ]}
</span></span></code></pre></div><p>We could run the tests as they are, however, the output is not easy to read. To make easier and nicer, we will using the HTML function from IPython.display to make a pretty table.</p><p>Once the module is imported we can create a variable called data_qc_table to store the information in. Assigned to this variable will be data.qc_table_html(tests) which generates the table from the tests dictionary we created above.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>from</span> IPython.display <span style=color:#f92672>import</span> HTML
</span></span><span style=display:flex><span>    data_qc_table <span style=color:#f92672>=</span> well<span style=color:#f92672>.</span>qc_table_html(tests)
</span></span><span style=display:flex><span>    HTML(data_qc_table)
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_3.png alt></p><p>After running the tests we can see that we have a coloured HTML table returned. Anything highlighted in green is True and anything in red is False.</p><p>From the table we can see that the BS (BitSize) curve failed on one of the three tests. Under the no_flat column we have a False value flagged which suggests that this curve contains constant/flat values. This has been correctly flagged as the bitsize curve measures the drill bit diameter, which will be constant for a given run or series of runs.</p><p>We can also see that a number of curves have been flagged as containing gaps.</p><p>The tests that were run just for GR and RHOB can also be seen in the table. When we run specific tests on specific curves, the remainder of the the results will be greyed out.</p><p>We can run another test to identify the fraction of the data that is not nan. For this we setup a new test and apply to all curves using Each.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    tests_nans <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;Each&#39;</span>: [wq<span style=color:#f92672>.</span>fraction_not_nans]}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    data_nans_qc_table <span style=color:#f92672>=</span> well<span style=color:#f92672>.</span>qc_table_html(tests_nans)
</span></span><span style=display:flex><span>    HTML(data_nans_qc_table)
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_4.png alt></p><p>Once we run these tests we are presented with a table similar to the one above. In the last column we have the total fraction of values for each curve this is not a nan. These values are in decimal, with a value of 1.0 representing 100% completeness. The Score column contains a rounded version of this number.</p><p>We can write a short loop and print the percentage values out for each curve. This provides a cleaner table to get an idea of missing data percentage for each curve.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    print((<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Curve </span><span style=color:#ae81ff>\t</span><span style=color:#e6db74> % Complete&#39;</span>)<span style=color:#f92672>.</span>expandtabs(<span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>    print((<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;----- </span><span style=color:#ae81ff>\t</span><span style=color:#e6db74> ----------&#39;</span>)<span style=color:#f92672>.</span>expandtabs(<span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> k,v <span style=color:#f92672>in</span> well<span style=color:#f92672>.</span>qc_data(tests_nans)<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i,j <span style=color:#f92672>in</span> v<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>            values <span style=color:#f92672>=</span> round(j<span style=color:#f92672>*</span><span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>        print((<span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>k<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#ae81ff>\t</span><span style=color:#e6db74> </span><span style=color:#e6db74>{</span>values<span style=color:#e6db74>}</span><span style=color:#e6db74>%&#39;</span>)<span style=color:#f92672>.</span>expandtabs(<span style=color:#ae81ff>10</span>))
</span></span></code></pre></div><p>This returns a nice</p><pre><code>Curve      % Complete
-----      ----------
ABDCQF01   9.72%
ABDCQF02   9.72%
ABDCQF03   9.72%
ABDCQF04   9.72%
BS         100.0%
CALI       10.6%
DRHO       10.62%
DT         12.84%
DTS        11.48%
GR         97.91%
NBGRCFM    39.73%
NPHI       10.28%
PEF        10.37%
RACEHM     25.72%
RACELM     25.72%
RD         96.14%
RHOB       10.37%
RM         96.14%
ROP        97.57%
RPCEHM     25.72%
RPCELM     25.72%
RT         25.72%
</code></pre><p>From the results we can see that a number of curves have a high percentage of missing values. This could be attributable to some of the measurements not starting until deeper in the well. We will be able to determine this in the next section with plots.</p><h2 id=data-plotting>Data Plotting</h2><p>Visualising well log data is at the heart of petrophysics, with log plots being one of the most common display formats. The welly library allows fast and easy generation of well log plots.</p><p>First we generate a list of data that we want to display in each track. If we want to display more than one curve in a track we can embed another list e.g. [&lsquo;MD&rsquo;, [&lsquo;DT&rsquo;, &lsquo;DTS&rsquo;]]. The curves within the inner list will be plotted on the same track and on the same scale.</p><p>Next, we can call upon the plot function and pass in the tracks list.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    tracks <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;MD&#39;</span>, <span style=color:#e6db74>&#39;GR&#39;</span>, <span style=color:#e6db74>&#39;RHOB&#39;</span>, <span style=color:#e6db74>&#39;NPHI&#39;</span>, [<span style=color:#e6db74>&#39;DT&#39;</span>, <span style=color:#e6db74>&#39;DTS&#39;</span>]]
</span></span><span style=display:flex><span>    well<span style=color:#f92672>.</span>plot(tracks<span style=color:#f92672>=</span>tracks)
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_5.png alt></p><p>As discussed in the data quality section, our assumption that some of the logging curves do not extend all the way to the top of the well. This is very common practice and avoids the need for and the cost of running tools from the top of the well to the bottom.</p><p>Let’s zoom in a little bit closer on the lower interval. To do this we can use a regular matplotlib function to set the y-axis limits. Note that we do need to reverse the numbers so that the deeper value is first, and the shallower one second.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    tracks <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;MD&#39;</span>, <span style=color:#e6db74>&#39;BS&#39;</span>, <span style=color:#e6db74>&#39;CALI&#39;</span>, <span style=color:#e6db74>&#39;GR&#39;</span>, <span style=color:#e6db74>&#39;RHOB&#39;</span>, <span style=color:#e6db74>&#39;NPHI&#39;</span>, [<span style=color:#e6db74>&#39;DT&#39;</span>, <span style=color:#e6db74>&#39;DTS&#39;</span>]]
</span></span><span style=display:flex><span>    well<span style=color:#f92672>.</span>plot(tracks<span style=color:#f92672>=</span>tracks)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>ylim(<span style=color:#ae81ff>3500</span>, <span style=color:#ae81ff>3000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    (<span style=color:#ae81ff>3500.0</span>, <span style=color:#ae81ff>3000.0</span>)
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_6.png alt></p><p>We can see from the result that we now have a nice looking plot with very little effort.</p><p>However, the control over the plot appearance is limited with the current implementation not allowing granular control over the plot such as colours, scales and displaying curves with reversed scales (e.g. Neutron & Density curves).</p><h2 id=well-log-data-to-pandas-dataframe>Well Log Data to Pandas Dataframe</h2><p>In this final section, we will look at exporting the well log data from welly to pandas. Pandas is one of the most popular libraries for storing, analysing and manipulating data.</p><p>The conversion is a simple process and can be achieved by calling .df() on our well object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    df <span style=color:#f92672>=</span> well<span style=color:#f92672>.</span>df()
</span></span></code></pre></div><p>We can confirm the data has been converted by calling upon the .describe() method from pandas to view the summary statistics of the data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    df<span style=color:#f92672>.</span>describe()
</span></span></code></pre></div><p><img src=https://www.andymcdonald.scot/images/blog/2021/06/06-13-Welly/welly_7.png alt></p><h2 id=summary>Summary</h2><p>The welly library, developed by Agile-Geoscience is a great tool for working with and exploring well log files. In this example we have seen how to load a single las file, explore the meta information about the well and the curve contents, and display the log data on a log plot.</p><p>Welly has significant more functionality that can handle multiple well logs as well as creating synthetic siesmiograms from the well data.</p><p>You can find and explore the welly repository <a href=https://github.com/agile-geoscience/welly>here</a>.</p><p><em><strong>Thanks for reading!</strong></em></p><p><em>If you have found this article useful, please feel free to check out my other articles looking at various aspects of Python and well log data. You can also find my code used in this article and others at <a href=https://github.com/andymcdgeo>GitHub</a>.</em></p><p><em>If you want to get in touch you can find me on <a href=https://www.linkedin.com/in/andymcdonaldgeo/>LinkedIn</a></em></p><p><em>Interested in learning more about python and well log data or petrophysics? Follow me on <a href=https://medium.com/@andymcdonaldgeo>Medium</a>.</em></p><p>If you have enjoyed this article or any others and want to show your appreciate you are welcome to <a href=https://www.buymeacoffee.com/andymcdonaldgeo>Buy Me a Coffee</a></p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=https://www.andymcdonald.scot/tags/libraries/>libraries</a>
<a class="tag tag--primary tag--small" href=https://www.andymcdonald.scot/tags/data-quality/>data-quality</a>
<a class="tag tag--primary tag--small" href=https://www.andymcdonald.scot/tags/data-visualisation/>data-visualisation</a>
<a class="tag tag--primary tag--small" href=https://www.andymcdonald.scot/tags/las-files/>las-files</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/2021-06-23-reservoir-rock-typing-definitions/ data-tooltip="Reservoir Rock Typing Definitions" aria-label="NEXT: Reservoir Rock Typing Definitions"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/2021-06-09-missingno/ data-tooltip="Using the missingno Python library to Identify and Visualise Missing Data Prior to Machine Learning" aria-label="PREVIOUS: Using the missingno Python library to Identify and Visualise Missing Data Prior to Machine Learning"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/",this.page.identifier="/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/"};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="hugo-tranquilpeak-theme",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Andy McDonald. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=2><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/2021-06-23-reservoir-rock-typing-definitions/ data-tooltip="Reservoir Rock Typing Definitions" aria-label="NEXT: Reservoir Rock Typing Definitions"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/2021-06-09-missingno/ data-tooltip="Using the missingno Python library to Identify and Visualise Missing Data Prior to Machine Learning" aria-label="PREVIOUS: Using the missingno Python library to Identify and Visualise Missing Data Prior to Machine Learning"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/2021-06-13-exploring-well-log-data-using-the-welly-python-library/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=2><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2F2021-06-13-exploring-well-log-data-using-the-welly-python-library%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2F2021-06-13-exploring-well-log-data-using-the-welly-python-library%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2F2021-06-13-exploring-well-log-data-using-the-welly-python-library%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"><h4 id=about-card-name>Andy McDonald</h4><div id=about-card-bio>Super bio with markdown support <strong>COOL</strong></div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Petrophysicist, Geoscientist, Data Scientist</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Scotland</div></div></div><div id=cover style=background-image:url(https://www.andymcdonald.scot/images/massimo-botturi-zFYUsLk_50Y-unsplash.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://www.andymcdonald.scot/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(t,e){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(e)})})</script></body></html>