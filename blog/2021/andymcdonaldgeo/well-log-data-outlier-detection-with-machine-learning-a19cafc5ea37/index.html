<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/www.andymcdonald.scot\/","author":{"@type":"Person","name":"Andy McDonald","image":"https://www.andymcdonald.scot/images/andy2.png"},"name":"Andy McDonald","description":"Identification of outliers is an essential step in the petrophysical machine learning workflow","url":"https:\/\/www.andymcdonald.scot\/blog\/2021\/andymcdonaldgeo\/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37\/","keywords":"[]"}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.98.0 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Andy McDonald"><meta name=keywords content><meta name=description content="Identification of outliers is an essential step in the petrophysical machine learning workflow"><meta property="og:description" content="Identification of outliers is an essential step in the petrophysical machine learning workflow"><meta property="og:type" content="article"><meta property="og:title" content="Well Log Data Outlier Detection With Machine Learning and Python"><meta name=twitter:title content="Well Log Data Outlier Detection With Machine Learning and Python"><meta property="og:url" content="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/"><meta property="twitter:url" content="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/"><meta property="og:site_name" content="Andy McDonald"><meta property="og:description" content="Identification of outliers is an essential step in the petrophysical machine learning workflow"><meta name=twitter:description content="Identification of outliers is an essential step in the petrophysical machine learning workflow"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-10-22T16:26:31"><meta property="article:modified_time" content="2021-10-22T16:26:31"><meta name=twitter:card content="summary"><meta property="og:image" content="https://www.andymcdonald.scot/images/andy2.png"><meta property="twitter:image" content="https://www.andymcdonald.scot/images/andy2.png"><title>Well Log Data Outlier Detection With Machine Learning and Python</title><link rel=icon href=https://www.andymcdonald.scot/favicon.png><link rel=canonical href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://www.andymcdonald.scot/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=2><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://www.andymcdonald.scot/ aria-label="Go to homepage">Andy McDonald</a></div><a class=header-right-picture href=https://www.andymcdonald.scot/#about aria-label="Open the link: /#about"><img class=header-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a></header><nav id=sidebar data-behavior=2><div class=sidebar-container><div class=sidebar-profile><a href=https://www.andymcdonald.scot/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Andy McDonald</h4><h5 class=sidebar-profile-bio>Super bio with markdown support <strong>COOL</strong></h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/blog title=Blog><i class="sidebar-button-icon fas fa-lg fa-server" aria-hidden=true></i>
<span class=sidebar-button-desc>Blog</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/published_work title=Publications><i class="sidebar-button-icon fas fa-lg fa-book" aria-hidden=true></i>
<span class=sidebar-button-desc>Publications</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/andymcdgeo target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/andymcdonaldgeo/ target=_blank rel=noopener title=LinkedIn><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>LinkedIn</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://medium.com/@andymcdonaldgeo target=_blank rel=noopener title=Medium><i class="sidebar-button-icon fab fa-lg fa-medium" aria-hidden=true></i>
<span class=sidebar-button-desc>Medium</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.youtube.com/c/AndyMcDonald42 target=_blank rel=noopener title=YouTube><i class="sidebar-button-icon fab fa-lg fa-youtube" aria-hidden=true></i>
<span class=sidebar-button-desc>YouTube</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=2 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>Well Log Data Outlier Detection With Machine Learning and Python</h1><div class="postShorten-meta post-meta"><time datetime=2021-10-22T16:26:31Z>October 22, 2021</time></div></div><div class="post-content markdown"><div class=main-content-wrap><p><img src=img/0__Q2FrSeLjqscpEgzx.jpg alt></p><p>Outliers are anomalous points within a dataset. They are points that don’t fit within the normal or expected statistical distribution of the dataset and can occur for a variety of reasons such as sensor and measurement errors, poor data sampling techniques, and unexpected events.</p><p>Within well log measurements and petrophysics data, outliers can occur due to washed-out boreholes, tool and sensor issues, rare geological features, and issues in the data acquisition process. It is essential that these outliers are identified and investigated early on in the workflow as they can result in inaccurate predictions by machine learning models.</p><p>The example in the figure below (from McDonald, 2021) illustrates core porosity versus core permeability. The majority of the data points form a coherent cluster, however, the point marked by the red square lies outside of this main group of points, and therefore could be considered an outlier. To confirm if it is indeed an outlier, further investigation into the reports and original data would be required.</p><p><img src=img/1__OqXFkSWUWBlS0Odw97yCgQ.png alt></p><h3 id=identifying-outliers>Identifying Outliers</h3><p>There are a number of ways to identify outliers within a dataset, some of these involve visual techniques such as scatterplots (e.g. crossplots) and boxplots, whilst others rely on univariate statistical methods (e.g. Z-score) or even unsupervised machine learning algorithms (e.g. K Nearest Neighbours).</p><p>The following methods for outlier detection will be covered within this article:</p><ul><li>Manual Removal Based on Domain Knowledge</li><li>Box Plot and IQR</li><li>Using a Caliper Curve</li><li>Automated Outlier Detection</li></ul><h3 id=petrophysical-machine-learningseries>Petrophysical Machine Learning Series</h3><p>This article forms the third part of an ongoing series that looks at taking a dataset from basic well log measurements through to petrophysical property prediction with machine learning.</p><p>These articles were originally presented as interactive notebooks at the SPWLA 2021 Conference during a Machine Learning and AI Workshop. They have since been expanded and updated to form these articles. The series consists of:</p><ol><li><a href=https://towardsdatascience.com/exploring-well-log-data-using-pandas-matplotlib-and-seaborn-712779a39ac2>Exploratory Data Analysis: Exploring Well Log Data Using Pandas, Matplotlib, and Seaborn</a></li><li><a href=https://towardsdatascience.com/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73>Identification and Handling of Missing Well Log Data Prior to Petrophysical Machine Learning</a></li><li>Well Log Data Outlier Detection — <em>This Article</em></li><li>Prediction of Key Reservoir Properties Using Machine Learning <br><em>**Not Completed Yet**</em></li></ol><h3 id=data>Data</h3><p>In 2018, Equinor released the entire contents of the Volve Field to the public domain to foster research and learning. The released data includes:</p><ul><li>Well Logs</li><li>Petrophysical Interpretations</li><li>Reports (geological, completion, petrophysical, core etc)</li><li>Core Measurements</li><li>Seismic Data</li><li>Geological Models</li><li>and more…</li></ul><p>The Volve Field is located some 200 km west of Stavanger in the Norwegian Sector of the North Sea. Hydrocarbons were discovered within the Jurassic aged Hugin Formation in 1993. Oil production began in 2008 and lasted for 8 years (twice as long as planned) until 2016, when production ceased. In total 63 MMBO were produced over the field’s lifetime and reached a plateau of 56,000 B/D.</p><p>Further details about the Volve Field and the entire dataset can be found at: <a href=https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html>https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html</a></p><p>The data is licensed under the Equinor Open Data Licence.</p><h3 id=selected-data-foranalysis>Selected Data for Analysis</h3><p>The Volve dataset consists of 24 wells containing a variety of well log data and other associated measurements. For this small tutorial series, we are going to take a selection of five wells. These are:</p><ul><li>15/9-F-1 A</li><li>15/9-F-1 B</li><li>15/9-F-1 C</li><li>15/9-F-11 A</li><li>15/9-F-11 B</li></ul><p>From these wells, a standard set of well logging measurements (features)have been selected. Their names, units, and descriptions are detailed in the table below.</p><p><img src=img/0__Wajhxi61alcCQgCo.png alt></p><p>The goal over the series of notebooks will be to predict three commonly derived petrophysical measurements: Porosity (PHIF), Water Saturation (SW), and Shale Volume (VSH). Traditionally, these are calculated through a number of empirically derived equations.</p><h3 id=importing-libraries-data>Importing Libraries & Data</h3><p>The first step in this part of the project is to import the libraries and the data that we are working with.</p><pre tabindex=0><code>import pandas as pdimport matplotlib.pyplot as pltimport numpy as npimport seaborn as snsimport scipy
</code></pre><pre tabindex=0><code>df = pd.read_csv(&#39;data/spwla_volve_data.csv&#39;)
</code></pre><p>An initial look at <code>describe()</code> function of pandas allows us to see the data range (min and max) for output.</p><pre tabindex=0><code>df.describe()
</code></pre><p><img src=img/1__49NkXOsnqhedgOKmPBEnAA.png alt></p><h3 id=dealing-with-outliers-using-manualmethods>Dealing With Outliers Using Manual Methods</h3><h4 id=removing-extreme-resistivities>Removing Extreme Resistivities</h4><p>Resistivity measurements provide an indication of how easy electrical current can pass through the formation. In simple terms, if the formation contains saline water, then the resistivity will be low, whereas if oil is present or there is very little pore space, the resistivity will be high.</p><p>There are a number of ways that the resistivity measurement can be affected, for example by nearby casing, tool/sensor issues, or even very highly resistive formations. Additionally, depending upon the type of tool making the measurement (induction, electromagnetic propagation, laterolog) there may be limitations on how accurate the readings are at high resistivity values.</p><p>The dataset we are working with contains electromagnetic propagation resistivity measurements, and we will apply the following cutoffs. These limits are not specific to any tool, and will vary depending on the data and technology used.</p><ul><li>RACHEM > 60</li><li>RACLEM > 100</li><li>RPCHEM > 100</li><li>RPCLEM > 200</li></ul><p>Any rows that contain resistivity measurements above these values will be removed. If we only removed the data values, we would have issues with missing data later on.</p><p>We can do this by:</p><pre tabindex=0><code>df = df.loc[~((df.RACEHM &gt; 60) | (df.RACELM &gt; 100) | (df.RPCEHM &gt; 100) | (df.RPCELM &gt; 200)),:]
</code></pre><pre tabindex=0><code>df.describe()
</code></pre><p>When we return the dataframe summary we can see that the number of measurements for these resistivity curves has reduced from 27,845 to 23,371</p><p><img src=img/1__vC8ZY__p12y1epguYSbS95g.png alt></p><h4 id=convert-resistivity-logathrithmic-curves-tonormal>Convert Resistivity Logathrithmic Curves to Normal</h4><p>As the resistivity curves have a large range of values from 10s of ohmm to 1000s of ohmm and often exhibits a skewed distribution, it would be best to convert the measurements to a more normal distribution by taking the log base 10 (log10) of the values.</p><pre tabindex=0><code># Select all resistivity curvesres_curves = [&#39;RACEHM&#39;, &#39;RACELM&#39;, &#39;RPCEHM&#39;, &#39;RPCELM&#39;]# Loop through each curve and transform itfor res in res_curves:    df[f&#39;{res}_l10&#39;] = np.log10(df[res])        # Drop out the original columns    df.drop(columns=[res],inplace=True)    df.head()
</code></pre><p><img src=img/1__sFf__GtALWksOOtC__3BsrLg.png alt></p><p>From the above table, we can now see that the new columns have been added to the dataframe and the old ones have been removed.</p><h4 id=identifying-outliers-withboxplots>Identifying Outliers with Boxplots</h4><p>A boxplot is a graphical and standardised way to display the distribution of data based on five key numbers: The “minimum”, 1st Quartile (25th percentile), median (2nd Quartile./ 50th Percentile), the 3rd Quartile (75th percentile), and the “maximum”. The minimum and maximum values are defined as Q1–1.5 * IQR and Q3 + 1.5 * IQR respectively. Any points that fall outside of these limits are referred to as outliers.</p><p><img src=img/0__uOCDHxiEtTijnVHz.jpg alt>
<img src=img/0__ci2Aq69XVfChev1l.png alt></p><p>The following video on my YouTube channel covers the background on boxplots and how to generate them in python.</p><p>The simplest method for calling a boxplot is using <code>.plot(kind='box)</code> on the dataframe. However, as you will see, this will plot all of the columns on one scale and if you have a different range of values between the curves, such from 0 to 1, and 3000 to 5000, then the smaller measurements will be harder to distinguish.</p><pre tabindex=0><code>df.plot(kind=&#39;box&#39;)plt.show()
</code></pre><p>To make the plots easier to view and understand, we can call upon the boxplot from the seaborn library and loop over each of the columns in the dataframe.</p><p>Once we have made the function we can create a list of the columns and “pop-off” or remove the well name column, which contains string data. We can then run the function for each of the log curves within the dataframe.</p><p><img src=img/1__U9uGzQIwbkB5e5MBORXL1g.png alt></p><p>From the generated plot, we can see that a few of the measurements may contain outliers, which are highlighted in green. Based on the boxplot alone, it is not easy to tell if these points are real outliers. This is where we need to rely on domain knowledge and other methods.</p><h4 id=identifying-outliers-with-crossplots>Identifying Outliers with Crossplots</h4><p>When working with multiple variables we can use crossplots to identify potential outliers. These involve plotting one logging measurement against another. A third logging measurement can be used to add colour to the plot to enhance the easy identification of outliers.</p><p>In this example, we will use a function to make a scatter plot (crossplot) of density vs neutron porosity data, which will be coloured by caliper.</p><p><img src=img/1__Bbj86TqMskoIuF3UlKxwOA.png alt></p><p>We can see on the returned plot that there are a few points highlighted in orange/red which indicates possible washout if we assume an 8.5 inch bitsize.</p><p>This indicates that a few measurements may be impacted by badhole conditions. Many logging tools are capable of compensating for a certain degree of washout and rugosity.</p><p>For the purposes of this example and to illustrate the process of dealing with bad data points impacted by washout, we will remove any points that are over 9". Which is 0.5" over guage. Any points that are less than 8.5" will also be removed.</p><p>We can do this by:</p><pre tabindex=0><code>df = df[(df[&#39;CALI&#39;] &gt;= 8.5) &amp; (df[&#39;CALI&#39;] &lt;= 9)]df.describe()
</code></pre><p><img src=img/1__OdqzRgPNuhDJSn6wkvIZPQ.png alt></p><p>We can now see that we have reduced our dataset further to 22,402 depth samples, which is down from 27,845 in the initial dataset.</p><h3 id=identifying-outliers-using-unsupervised-machine-learningmethods>Identifying Outliers Using Unsupervised Machine Learning Methods</h3><p>Both supervised and unsupervised machine learning methods can be used to identify outliers within well log data and petrophysical data. For the purposes of this tutorial, we will focus on a few unsupervised learning techniques.</p><p>Unsupervised machine learning models attempt to identify underlying relationships within the data without the need for labeled categories. There are a number of unsupervised machine learning methods that can be used to identify anomalies / outliers within a dataset.</p><p>In this article we will look at three common methods:</p><ul><li>Isolation Forest (IF)</li><li>One Class SVM (SVM)</li><li>Local Outlier Factor (LOF)</li></ul><h4 id=isolation-forest><strong>Isolation Forest</strong></h4><p>The isolation forest method is based upon decision trees. This method selects a feature/measurement and makes a random split in the data between the minimum and maximum values. This process then carries on down the decision tree until all possible splits have been made in the data. Any anomalies/outliers will be split off early in the process making them easy to identify and isolate from the rest of the data.</p><p>The image below illustrates a very simple example using a single variable — bulk density (RHOB).</p><p><img src=img/1__fWE6GpKxlw9HJle9jE6WZA.png alt></p><h4 id=one-classsvm>One Class SVM</h4><p>Support vector machines are a common machine learning tool for classification, which means they are good for splitting data up into different groups based on the data characteristics. This is achieved by identifying the maximum margin hyperplane between the groups of data as seen in the simple multi-class example below.</p><p><img src=img/1__iWjvdwb9pvy2GKkEV3oppA.png alt></p><p>In a conventional SVM classification, we have more than one class or facies. However, when we only have one class of data we can use what is known as a One Class SVM.</p><p>In the case of outlier detection, what we want to do is find the boundary that separates the data points from the origin (see left-hand graph in figure below). Where in this case we treat the origin as the second class. Any points that are outside of the boundary line are considered outliers. We can control the position of the line by providing a value for the number of outliers we want to detect within our dataset. This parameter is known as the contamination level.</p><p>But in reality, outliers can exist on any side in relation to the main data cloud. In this case, we want to find a non-linear hyperplane that separates the outliers from the main data points (see right-hand graph in figure below). We can use an RBF kernel (Radial Basis Function Kernel) that finds the non-linear boundary between the points.</p><p>We can control how many outliers are allowed to be identified by specifying the contamination level. If we only want a small number of outliers, we can set this to a smaller number. Similarly, if we want a higher number of outliers to be detected, we can provide the algorithm with a higher number for contamination.</p><p><img src=img/1__1LtnkUyAn6ohmzpRLqSLng.png alt></p><h4 id=local-outlierfactor><strong>Local Outlier Factor</strong></h4><p>This method assesses the density of data points around a given point. Points that have a low density compared to others will be considered outliers. For further information on this method check out this link:</p><p><a href=https://medium.com/mlpoint/local-outlier-factor-a-way-to-detect-outliers-dde335d77e1a>https://medium.com/mlpoint/local-outlier-factor-a-way-to-detect-outliers-dde335d77e1a</a></p><p><img src=img/1__qu4NAAey2dNt__bOzFNu3DA.png alt></p><h4 id=creating-themodels>Creating the Models</h4><p>We can create the models very simply using the code below, which is done using the <a href=https://scikit-learn.org/stable/>scikit learn library.</a></p><p><img src=img/1__Ag0SMxrdAh41UizAuvg89Q.png alt></p><p>We can now check the performance of each of the models using density-neutron crossplots. This is achieved using Seaborn’s FacetGrid and mapping a scatter plot to it as follows.</p><p>This returns the following plots for each method and the number of anomalous data points that were identified.</p><p>It appears that the IF method is providing a better result, followed by LOF and then SVM. Most of the outliers on the right-hand side of the plot are removed in the first two methods.</p><p>We can look at the data in more detail for each of the well for each of the methods.</p><p>Which returns the following plots.</p><p><img src=img/1__SqOoy__hLhXe0fk7QJjihRA.png alt></p><p>This gives us a better idea of how the anomalies have been identified in each of the wells using the selected methods. We can see that the LOF method has highlighted a number of points within the centre of the data points, which may not be true outliers. This is the point where domain expert knowledge comes into play in confirming if the points are indeed outliers.</p><h4 id=displaying-outlier-points-on-logplots>Displaying Outlier Points on Log Plots</h4><p>To identify where the outliers have been detected, we can generate simple log plots for each method and for each well using the code below.</p><p>Before plotting the data we can make things easier by splitting up the dataframe into multiple dataframes based on the well name</p><p>Once the dataframe has been split up by well, we can use the index number of the list to access the required data.</p><p>If we loop through the well names list we can get the index number and the associated well name.</p><p>Which returns:</p><pre tabindex=0><code>Wellname 	 Index15/9-F-1 A 	015/9-F-1 B 	115/9-F-1 C 	215/9-F-11 A 	315/9-F-11 B 	4
</code></pre><p>We can then use this to select the required well</p><p><img src=img/1__1xfYRMI7L0mX5SjaJ__ByHw.png alt></p><p>The plots above show us where the anomalies/potential outliers exist on a conventional log plot. The interval from 3700 to 3875 is an interval that contains missing values. As we are using a line plot the points on either side of this gap are interpolated to create a line.</p><p>The highlighted intervals will need to be evaluated in closer detail and with domain knowledge, but for the purposes of this tutorial, we will go with the results of the Isolation Forest method.</p><h3 id=exporting-theresults>Exporting the Results</h3><p>Now that we have a clean dataset, we can export it to the required files for our machine learning stage.</p><p>To do this, we first need to create our temporary dataframe where we only use data that has been identified as inliers by the Isolation Forest algorithm. Once these points have been removed, we can then create our output dataframe.</p><h4 id=creating-supervised-learningfiles>Creating Supervised Learning Files</h4><p>To prepare the Supervised Learning file, we need to carry out a few steps.</p><h4 id=train-validate-and-testsplit>Train, Validate, and Test Split</h4><p>Before exporting our data, we first need to split the data into training, validation, and test datasets.</p><p>The training dataset is used for training the model, the validation dataset is used to tune the model parameters, and the test dataset is used to verify the model on unseen data. It should be noted that these terms are used interchangeably and can cause confusion.</p><h4 id=test-data-separation>Test Data Separation</h4><p>First, we will split off one well (15/9-F11 B) for our testing dataset, and the remainder of the wells and data will be assigned to <code>training_val_wells</code></p><h4 id=training-and-validation-datasets>Training and Validation Datasets</h4><p>Next, we split our <code>training_val_wells</code> data up into the training features and target features (SW, PHIF & VSH). In situations where we are using Sklearn for prediction, we would typically only specify one feature for prediction. However, for the example, we will be setting three target features.</p><p>When we check the training features (X), we can see we have all of the required columns.</p><pre tabindex=0><code>X.head()
</code></pre><p><img src=img/1__0PcKbEax5O2YOgGrK2WeIg.png alt></p><p>We can also check the head of the target features (y):</p><pre tabindex=0><code>y.head()
</code></pre><p><img src=img/1__ecwrR2wsuqUeSq1R8th6__Q.png alt></p><h4 id=train-test-split>Train-Test Split</h4><p>Sklearn’s train_test_split module. For this example, we will use a training size of 70%, which leaves 30% for validating and tuning the model. <code>random_state</code> has been set to a fixed value to allow reproducible results for this workshop. If you want to randomise the values each time, you can remove this method input.</p><p><strong><em>It should be noted that the method used here is called train_test_split. But what we are actually doing is splitting off the training and validation datasets.</em></strong></p><h3 id=summary>Summary</h3><p>In this article we have covered what outliers are and methods for identifying them using plots and unsupervised learning algorithms. Once the outliers have been identified they can be removed. This is done using a combination of the methods and domain expertise. If points are thrown away blindly, you could be throwing away valuable data. So always check that your identified outliers are really outliers.</p><p>This notebook was originally published for the SPWLA Machine Learning Workshop at the 2021 SPWLA Conference, and has since been modified.</p><p><em>Thanks for reading!</em></p><p><em>If you have found this article useful, please feel free to check out my other articles looking at various aspects of Python and well log data. You can also find my code used in this article and others at</em> <a href=https://github.com/andymcdgeo><em>GitHub</em></a><em>.</em></p><p><em>If you want to get in touch you can find me on</em> <a href=https://www.linkedin.com/in/andymcdonaldgeo/><em>LinkedIn</em></a> <em>or at my</em> <a href=http://andymcdonald.scot/><em>website</em></a><em>.</em></p><p><em>Interested in learning more about python and well log data or petrophysics? Follow me on</em> <a href=https://andymcdonaldgeo.medium.com/subscribe><em>Medium</em></a><em>.</em></p><p>If you enjoy reading these tutorials and want to support me as a writer and creator, then please consider signing up to become a Medium member. It’s $5 a month and you get unlimited access to many thousands of articles on a wide range of topics. If you sign up using <a href=https://andymcdonaldgeo.medium.com/membership><strong>my link</strong></a><strong>,</strong> I will earn a small commission with no extra cost to you!</p><p><a href=https://andymcdonaldgeo.medium.com/membership title=https://andymcdonaldgeo.medium.com/membership><strong>Join Medium with my referral link - Andy McDonald</strong><br>_As a Medium member, a portion of your membership fee goes to writers you read, and you get full access to every story…_andymcdonaldgeo.medium.com</a><a href=https://andymcdonaldgeo.medium.com/membership></a></p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/ data-tooltip="Visualizing Well Paths With The Welly Python Library" aria-label="NEXT: Visualizing Well Paths With The Welly Python Library"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73/ data-tooltip="Identifying and Handling Missing Well Log Data Prior to Machine Learning" aria-label="PREVIOUS: Identifying and Handling Missing Well Log Data Prior to Machine Learning"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/",this.page.identifier="/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/"};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="hugo-tranquilpeak-theme",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Andy McDonald. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=2><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/ data-tooltip="Visualizing Well Paths With The Welly Python Library" aria-label="NEXT: Visualizing Well Paths With The Welly Python Library"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73/ data-tooltip="Identifying and Handling Missing Well Log Data Prior to Machine Learning" aria-label="PREVIOUS: Identifying and Handling Missing Well Log Data Prior to Machine Learning"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=2><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fwell-log-data-outlier-detection-with-machine-learning-a19cafc5ea37%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fwell-log-data-outlier-detection-with-machine-learning-a19cafc5ea37%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fwell-log-data-outlier-detection-with-machine-learning-a19cafc5ea37%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"><h4 id=about-card-name>Andy McDonald</h4><div id=about-card-bio>Super bio with markdown support <strong>COOL</strong></div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Petrophysicist, Geoscientist, Data Scientist</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Scotland</div></div></div><div id=cover style=background-image:url(https://www.andymcdonald.scot/images/massimo-botturi-zFYUsLk_50Y-unsplash.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://www.andymcdonald.scot/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(t,e){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(e)})})</script></body></html>