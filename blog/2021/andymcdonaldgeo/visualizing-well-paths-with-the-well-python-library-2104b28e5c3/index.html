<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/www.andymcdonald.scot\/","author":{"@type":"Person","name":"Andy McDonald","image":"https://www.andymcdonald.scot/images/andy2.png"},"name":"Andy McDonald","description":"Creating 3D Line Plots Using Matplotlib to Visualize Well Trajectories","url":"https:\/\/www.andymcdonald.scot\/blog\/2021\/andymcdonaldgeo\/visualizing-well-paths-with-the-well-python-library-2104b28e5c3\/","keywords":"[]"}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.98.0 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Andy McDonald"><meta name=keywords content><meta name=description content="Creating 3D Line Plots Using Matplotlib to Visualize Well Trajectories"><meta property="og:description" content="Creating 3D Line Plots Using Matplotlib to Visualize Well Trajectories"><meta property="og:type" content="article"><meta property="og:title" content="Visualizing Well Paths With The Welly Python Library"><meta name=twitter:title content="Visualizing Well Paths With The Welly Python Library"><meta property="og:url" content="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/"><meta property="twitter:url" content="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/"><meta property="og:site_name" content="Andy McDonald"><meta property="og:description" content="Creating 3D Line Plots Using Matplotlib to Visualize Well Trajectories"><meta name=twitter:description content="Creating 3D Line Plots Using Matplotlib to Visualize Well Trajectories"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2021-11-14T12:03:45"><meta property="article:modified_time" content="2021-11-14T12:03:45"><meta name=twitter:card content="summary"><meta property="og:image" content="https://www.andymcdonald.scot/images/andy2.png"><meta property="twitter:image" content="https://www.andymcdonald.scot/images/andy2.png"><title>Visualizing Well Paths With The Welly Python Library</title><link rel=icon href=https://www.andymcdonald.scot/favicon.png><link rel=canonical href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://www.andymcdonald.scot/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=2><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://www.andymcdonald.scot/ aria-label="Go to homepage">Andy McDonald</a></div><a class=header-right-picture href=https://www.andymcdonald.scot/#about aria-label="Open the link: /#about"><img class=header-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a></header><nav id=sidebar data-behavior=2><div class=sidebar-container><div class=sidebar-profile><a href=https://www.andymcdonald.scot/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Andy McDonald</h4><h5 class=sidebar-profile-bio>Super bio with markdown support <strong>COOL</strong></h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/blog title=Blog><i class="sidebar-button-icon fas fa-lg fa-server" aria-hidden=true></i>
<span class=sidebar-button-desc>Blog</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/publications title=Publications><i class="sidebar-button-icon fas fa-lg fa-book" aria-hidden=true></i>
<span class=sidebar-button-desc>Publications</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/andymcdgeo target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/andymcdonaldgeo/ target=_blank rel=noopener title=LinkedIn><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>LinkedIn</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://medium.com/@andymcdonaldgeo target=_blank rel=noopener title=Medium><i class="sidebar-button-icon fab fa-lg fa-medium" aria-hidden=true></i>
<span class=sidebar-button-desc>Medium</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.youtube.com/c/AndyMcDonald42 target=_blank rel=noopener title=YouTube><i class="sidebar-button-icon fab fa-lg fa-youtube" aria-hidden=true></i>
<span class=sidebar-button-desc>YouTube</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.andymcdonald.scot/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=2 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>Visualizing Well Paths With The Welly Python Library</h1><div class="postShorten-meta post-meta"><time datetime=2021-11-14T12:03:45Z>November 14, 2021</time></div></div><div class="post-content markdown"><div class=main-content-wrap><p><img src=img/1__9o4lu6__TwwKw5ninFsEVMw.png alt></p><p>There are multiple depth references used within well logging to denote a position along the wellbore. These include measured depth (MD), true vertical depth (TVD), true vertical depth subsea (TVDSS) etc. All of which are critical measurements for the successful development and completion of a well.</p><p><img src=img/0__4p1JqRBuY0Hyn2SE.png alt></p><p>The above image illustrates the key depth references that are referred to within this article.</p><ul><li>Measured Depth (MD) is the length of the wellbore measured along its length.</li><li>True Vertical Depth (TVD), is the absolute vertical distance between a datum, such as the rotary table, and a point in the wellbore.</li><li>True Vertical Depth Sub Sea (TVDSS), is the absolute vertical distance between mean sea level and a point in the wellbore.</li></ul><p>When a well is vertical, MD is equal to TVD when measured from the same datum. In the case where the well is deviated, the TVD value becomes less than the MD value.</p><p>The majority of LAS files are referenced to measured depth, and often do not contain a TVD curve. As a result, we have to use some maths to calculate the TVD. For this, we require the inclination of the well which is the deviation of the wellbore from vertical, and we also need the azimuth which measures the direction of the well trajectory relative to north.</p><p>In this article, we are not going to focus on the calculations behind TVD, instead, we are going to see how we can use the location module of Welly to calculate it. If you want to know more about the maths behind the calculations, I have included a link to a few articles in the description below.</p><p><a href=https://www.drillingformulas.com/minimum-curvature-method/ title=https://www.drillingformulas.com/minimum-curvature-method/><strong>Minimum Curvature Method</strong><br>_Facebook0Tweet0Pin0LinkedIn0 The Minimum Curvature Method smooths two straight-line segments of the Balanced Tangential…_www.drillingformulas.com</a><a href=https://www.drillingformulas.com/minimum-curvature-method/></a></p><h4 id=video-version-oftutorial>Video Version of Tutorial</h4><p>If you prefer to follow along with a video, you can find it below on my YouTube channel.</p><h3 id=python-tutorial>Python Tutorial</h3><h4 id=importing-libraries--loadingdata>Importing Libraries & Loading Data</h4><p>Let&rsquo;s begin with importing the libraries that we will be working with. These are the location and well modules from the welly library and the panda&rsquo;s library.</p><pre tabindex=0><code>from welly import Locationfrom welly import Wellimport pandas as pd
</code></pre><p>Once we have imported these, we can load in the data. The data used in this example comes from the Dutch Sector of the North Sea and can be found on the <a href=https://www.nlog.nl>NLOG website</a> or on my <a href=https://github.com/andymcdgeo/Andys_YouTube_Notebooks>Github Repo.</a></p><pre tabindex=0><code>data = Well.from_las(&#39;Netherlands Data/L05-15-Spliced.las&#39;)
</code></pre><h4 id=checking-thedata>Checking the Data</h4><p>If we call upon the <code>data</code> variable we have just created, we can get a summary of the well. We can see the well name, the location, and information about the data contained within the file.</p><p><img src=img/1__1ezZQP8N0D04Bpe6htNFmQ.png alt></p><p>If we want a closer look at the data, we can call our well object followed by <code>.data</code>. This provides a dictionary object containing the curve mnemonic and the values contained within the first 3 and last 3 rows. As expected the majority of the data is missing.</p><pre tabindex=0><code>data.data
</code></pre><pre tabindex=0><code>{&#39;BHT&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CAL&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CHT&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CN&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CNC&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CNCQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;CNQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;GR&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MBVI&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MBVM&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MCBW&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MPHE&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MPHS&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;MPRM&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;PEQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;PORZ&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;PORZC&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;TEN&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;TTEN&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;WTBH&#39;: Curve([   nan,    nan, 87.943, ...,    nan,    nan,    nan]), &#39;ZCORQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;ZDEN&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;ZDENQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;ZDNC&#39;: Curve([nan, nan, nan, ..., nan, nan, nan]), &#39;ZDNCQH&#39;: Curve([nan, nan, nan, ..., nan, nan, nan])}
</code></pre><p>A better way to understand the data contents is to look at a <a href=https://youtu.be/yNnMY_-X0Bo>well log plot</a>. We can do this by calling upon <code>data.plot</code> and set the keyword argument for extents to curves. We can generate a plot that will start from the first measurement value and go to the last measurement value.</p><p>data.plot(extents=&lsquo;curves&rsquo;)</p><p>This returns the following plot. This plot allows us to quickly see the contents of each logging measurement and their character, it can be difficult to see if you have a large number of curves present in your data.</p><p>We won’t be going into the plotting of the log data in this article, but if you are interested, be sure to check out my <a href=https://youtu.be/IUPajB6fETY>YouTube video</a> in the welly series where I focus on working with single and multiple wells.</p><p><img src=img/1__nVfiF__kMIPo7HKwATMZvQg.png alt></p><h3 id=working-with-survey-data-andwelly>Working with Survey Data and Welly</h3><h4 id=importing-surveydata>Importing Survey Data</h4><p>Now that we have the log data loaded, we can begin to load the survey data.</p><p>Survey data is commonly measured at irregular intervals during the drilling process. It gives a snapshot of the measured depth (MD), inclination (INC) and azimuth (AZI) at the time of the survey. From this, we can calculate the True Vertical Depth (TVD), x-offset and y-offset from the origin point of the well.</p><p>Commonly the data is provided in a table or CSV format. To load the CSV data we can use <code>pd.read_csv()</code> and pass in the location of the file and its name.</p><pre tabindex=0><code>survey = pd.read_csv(&#39;Netherlands Data/L05-15-Survey.csv&#39;)
</code></pre><p>When we call upon the survey object, we see we have a dataframe returned containing the key well position information.</p><p>Welly requires the survey data to contain measured depth, inclination, and azimuth. This allows the library to calculate the TVD, X-offset and Y-offset.</p><p>We can subset the data by calling upon the survey dataframe and using square brackets to pass in a list of the desired column names.</p><pre tabindex=0><code>survey_subset = survey[[&#39;MD&#39;, &#39;INC&#39;, &#39;AZI&#39;]]
</code></pre><p>When we call upon <code>survey_subset</code>, we get back the following dataframe.</p><h4 id=adding-survey-data-to-wellywell>Adding Survey Data to Welly Well</h4><p>After the survey data has been loaded from a CSV file, we need to calculate our location parameters. By default, <a href=https://github.com/agile-geoscience/welly>Welly</a> is set to calculate these using the minimum curvature method, which is the most common and most accurate method for this purpose.</p><p>More information on this method can be found at <a href=https://petrowiki.spe.org/Calculation_methods_for_directional_survey>https://petrowiki.spe.org/Calculation_methods_for_directional_survey</a></p><p>To add the survey data to the well we can call upon the following</p><pre tabindex=0><code>#Add deviation data to a welldata.location.add_deviation(survey_subset.values)
</code></pre><p>Now that the survey data has been loaded into our Welly well object, we can call upon <code>data.location.position</code> to view the data. For this example, I have used slicing notation to return just the first 5 rows of the data.</p><pre tabindex=0><code>#View first five rows of the datadata.location.position[:5]
</code></pre><p>The returned array is formatted as: X-offset, Y-offset, and TVD.</p><pre tabindex=0><code>array([[  0.        ,   0.        ,   0.        ],       [  0.        ,   0.        ,  89.3       ],       [ -0.6333253 ,   0.8552655 , 142.08569704],       [ -1.59422229,   2.03112298, 170.14372544],       [ -3.19869524,   3.75201703, 197.74222054]])
</code></pre><p>We can extract each of the location parameters into variables by slicing up the array. This is done using square brackets and selecting all rows using the colon (:) followed by the column within the array.</p><pre tabindex=0><code>x_loc = data.location.position[:,0]y_loc = data.location.position[:,1]z_loc = data.location.position[:,2]
</code></pre><p>If we call upon z_loc, which is our TVD, we get back the following array:</p><pre tabindex=0><code>array([   0.        ,   89.3       ,  142.08569704,  170.14372544,        197.74222054,  225.68858529,  254.17872844,  282.83986178,        311.3294853 ,  339.82739229,  368.42706739,  396.92691062,        425.62638313,  454.22551155,  482.42473573,  511.12342097,        539.72042719,  568.21483874,  597.00539705,  625.8900492 ,        654.36614119,  683.22656973,  711.6691264 ,  740.00649462,        767.54748074,  797.06893638,  825.36408467,  853.83548556,        882.30553194,  910.5784206 ,  939.03148052,  967.35658945,        995.56380403, 1023.95695144, 1052.22740711, 1080.54668678,       1108.68959153, 1136.6589388 , 1164.87003188, 1192.91335907,       1220.78632672, 1248.71483434, 1276.69724251, 1304.38501765,       1332.02759325, 1359.48829109, 1386.59399864, 1413.47807554,       1440.51055639, 1467.37758752, 1494.27990524, 1521.15255355,       1547.94826077, 1574.81148851, 1601.67556214, 1628.46190115,       1655.38744119, 1682.77094459, 1709.94467279, 1737.02953371,       1764.09191195, 1791.3868565 , 1818.75450935, 1845.99897829,       1873.48895669, 1900.86728951, 1928.20315443, 1955.1719983 ,       1982.16522007, 2009.02433087, 2035.75920778, 2062.44460278,       2088.89113734, 2115.18715337, 2141.53399746, 2167.86835015,       2194.17601217, 2220.34087524, 2246.65950847, 2273.26101123,       2300.13882036, 2326.97261339, 2353.95042418, 2380.81977995,       2407.70173751, 2434.4676547 , 2460.90920154, 2472.20902514,       2498.66491934, 2525.74629926, 2553.35452297, 2579.86481719,       2606.67927736, 2634.67341768, 2663.73057678, 2690.48389425,       2716.3110963 , 2743.39559139, 2770.53319932, 2798.10117685,       2824.99473242, 2851.85337513, 2879.55133503, 2906.56976579,       2933.96384651, 2960.25680057, 2986.50202763, 3013.35506117,       3039.2427437 , 3065.81112303, 3078.05551274, 3096.92997476])
</code></pre><p>We can also access the same data by calling upon <code>data.location.tvd.</code></p><pre tabindex=0><code>array([   0.        ,   89.3       ,  142.08569704,  170.14372544,        197.74222054,  225.68858529,  254.17872844,  282.83986178,        311.3294853 ,  339.82739229,  368.42706739,  396.92691062,        425.62638313,  454.22551155,  482.42473573,  511.12342097,        539.72042719,  568.21483874,  597.00539705,  625.8900492 ,        654.36614119,  683.22656973,  711.6691264 ,  740.00649462,        767.54748074,  797.06893638,  825.36408467,  853.83548556,        882.30553194,  910.5784206 ,  939.03148052,  967.35658945,        995.56380403, 1023.95695144, 1052.22740711, 1080.54668678,       1108.68959153, 1136.6589388 , 1164.87003188, 1192.91335907,       1220.78632672, 1248.71483434, 1276.69724251, 1304.38501765,       1332.02759325, 1359.48829109, 1386.59399864, 1413.47807554,       1440.51055639, 1467.37758752, 1494.27990524, 1521.15255355,       1547.94826077, 1574.81148851, 1601.67556214, 1628.46190115,       1655.38744119, 1682.77094459, 1709.94467279, 1737.02953371,       1764.09191195, 1791.3868565 , 1818.75450935, 1845.99897829,       1873.48895669, 1900.86728951, 1928.20315443, 1955.1719983 ,       1982.16522007, 2009.02433087, 2035.75920778, 2062.44460278,       2088.89113734, 2115.18715337, 2141.53399746, 2167.86835015,       2194.17601217, 2220.34087524, 2246.65950847, 2273.26101123,       2300.13882036, 2326.97261339, 2353.95042418, 2380.81977995,       2407.70173751, 2434.4676547 , 2460.90920154, 2472.20902514,       2498.66491934, 2525.74629926, 2553.35452297, 2579.86481719,       2606.67927736, 2634.67341768, 2663.73057678, 2690.48389425,       2716.3110963 , 2743.39559139, 2770.53319932, 2798.10117685,       2824.99473242, 2851.85337513, 2879.55133503, 2906.56976579,       2933.96384651, 2960.25680057, 2986.50202763, 3013.35506117,       3039.2427437 , 3065.81112303, 3078.05551274, 3096.92997476])
</code></pre><h4 id=creating-locationplots>Creating Location Plots</h4><p>To understand the position of the well, we can call upon three plots.</p><ul><li>X-offset vs Y-offset (Topographical View)</li><li>X-offset vs TVD</li><li>Y-offset vs TVD</li></ul><p>To create these plots we can use matplotlib and create multiple plots using <a href=https://youtu.be/pPqLgmbyets>subplot2grid</a>.</p><pre tabindex=0><code>import matplotlib.pyplot as pltfig, ax = plt.subplots(figsize=(15,5))ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))ax1.plot(x_loc, y_loc, lw=3)ax1.set_title(&#39;X Location vs Y Location&#39;)ax2.plot(x_loc, z_loc, lw=3)ax2.set_title(&#39;X Location vs TVD&#39;)ax3.plot(y_loc, z_loc, lw=3)ax3.set_title(&#39;Y Location vs TVD&#39;)
</code></pre><pre tabindex=0><code>Text(0.5, 1.0, &#39;Y Location vs TVD&#39;)
</code></pre><p>This returns our three well profile plots.</p><p>Notice that the two TVD plots are reversed, we will sort this using <code>ax.invert_yaxis()</code>.</p><h4 id=add-markers-for-start-of-the-well--end-of-thewell>Add Markers for Start of the Well & End of the Well</h4><p>We can add markers to our plot to show the starting location (black square) and the end location (red star) of the well. Additionally, we will invert the y-axis of the two TVD plots.</p><pre tabindex=0><code>fig, ax = plt.subplots(figsize=(15,5))ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))ax1.plot(x_loc, y_loc, lw=3)ax1.plot(x_loc[0], y_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax1.plot(x_loc[-1], y_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax1.set_title(&#39;X Location vs Y Location&#39;)ax2.plot(x_loc, z_loc, lw=3)ax2.plot(x_loc[0], z_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax2.plot(x_loc[-1], z_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax2.invert_yaxis()ax2.set_title(&#39;X Location vs TVD&#39;)ax3.plot(y_loc, z_loc, lw=3)ax3.plot(y_loc[0], z_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax3.plot(y_loc[-1], z_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax3.invert_yaxis()ax3.set_title(&#39;Y Location vs TVD&#39;)
</code></pre><pre tabindex=0><code>Text(0.5, 1.0, &#39;Y Location vs TVD&#39;)
</code></pre><h4 id=compare-against-originalsurvey>Compare Against Original Survey</h4><p>We are fortunate enough to have a survey file that contains the location parameters and TVD — this may not always be the case. We can do a quick check with what Welly has calculated and the ones contained within the CSV file by adding that data to our plots.</p><pre tabindex=0><code>fig, ax = plt.subplots(figsize=(15,5))ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))ax1.plot(x_loc, y_loc, lw=7)ax1.plot(x_loc[0], y_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax1.plot(survey[&#39;X-offset&#39;], survey[&#39;Y-offset&#39;])ax1.plot(x_loc[-1], y_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax1.set_title(&#39;X Location vs Y Location&#39;)ax2.plot(x_loc, z_loc, lw=7)ax2.plot(x_loc[0], z_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax2.plot(survey[&#39;X-offset&#39;], survey[&#39;TVD&#39;])ax2.plot(x_loc[-1], z_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax2.invert_yaxis()ax2.set_title(&#39;X Location vs TVD&#39;)ax3.plot(y_loc, z_loc, lw=7)ax3.plot(y_loc[0], z_loc[0], marker=&#39;s&#39;, color=&#39;black&#39;, ms=8)ax3.plot(survey[&#39;Y-offset&#39;], survey[&#39;TVD&#39;])ax3.plot(y_loc[-1], z_loc[-1], marker=&#39;*&#39;, color=&#39;red&#39;, ms=8)ax3.invert_yaxis()ax3.set_title(&#39;X Location vs TVD&#39;)
</code></pre><pre tabindex=0><code>Text(0.5, 1.0, &#39;X Location vs TVD&#39;)
</code></pre><h3 id=create-3d-plot-of-wellpath>Create 3D Plot of Well Path</h3><p>Rather than viewing the data in two dimensions, we can view it in three dimensions using matplotlib. But first, we have to calculate continuous data. This is done by using <code>location.trajectory()</code>. Here we can provide a datum, i.e the UTM co-ordinates of the well location at the surface, and a vertical offset.</p><p>If we look at the following image from the NLOG website, we have the exact surface co-ordinates of the well</p><p>We will use the Delivered Location co-ordinates in the <code>location.trajectory()</code> function.</p><pre tabindex=0><code># Create a trajectory of regularly sampled pointslocation_data = data.location.trajectory(datum=[589075.56, 5963534.91, 0], elev=False)
</code></pre><pre tabindex=0><code>xs = location_data[:,0]ys = location_data[:,1]zs = location_data[:,2]
</code></pre><pre tabindex=0><code>plt.plot(xs, ys)plt.xlabel(&#39;X Location&#39;)plt.ylabel(&#39;Y Location&#39;)plt.ticklabel_format(style=&#39;plain&#39;)plt.grid()
</code></pre><p>When we run this code, we now have a topographical view of our well and the values reflect the true co-ordinates of the well.</p><h4 id=creating-the-3dplot>Creating the 3D Plot</h4><p>Now that the well location has been referenced to a datum, we can move onto plotting our well path. The previous steps do not need to be applied and you can view this using the x, y and z location</p><p>To create the 3D plot, we need to import Axes3D from <code>mpl_toolkits.mplot3d</code> and then when we need to enable 3D plotting by using a magic Jupyter command: <code>%matplotlib widget</code> .</p><p>We then create the figure and set the projection to 3d as seen in the following code.</p><pre tabindex=0><code>from mpl_toolkits.mplot3d import Axes3D
</code></pre><pre tabindex=0><code># Enable 3D Ploting%matplotlib widget
</code></pre><pre tabindex=0><code>fig = plt.figure(figsize=(8, 8))ax = plt.axes(projection=&#39;3d&#39;)ax.plot3D(xs, ys, zs, lw=10)ax.set_zlim(3000, 0)ax.set_xlabel(&#39;X Location&#39;)ax.set_ylabel(&#39;Y Location&#39;)ax.set_zlabel(&#39;TVD&#39;)plt.ticklabel_format(style=&#39;plain&#39;)plt.show()
</code></pre><h3 id=summary>Summary</h3><p>Within this short tutorial, we have seen how to combine raw well survey data with a Welly well object and visualise the well path in plan and side views. We have also seen how we can visualise the well path in 3D using matplotlib. In doing this, we can get a better understanding of the well path trajectory.</p><p><em>Thanks for reading!</em></p><p><em>If you have found this article useful, please feel free to check out my other articles looking at various aspects of Python and well log data. You can also find my code used in this article and others at</em> <a href=https://github.com/andymcdgeo><em>GitHub</em></a><em>.</em></p><p><em>If you want to get in touch you can find me on</em> <a href=https://www.linkedin.com/in/andymcdonaldgeo/><em>LinkedIn</em></a> <em>or at my</em> <a href=http://andymcdonald.scot/><em>website</em></a><em>.</em></p><p><em>Interested in learning more about python and well log data or petrophysics? Follow me on</em> <a href=https://andymcdonaldgeo.medium.com/subscribe><em>Medium</em></a><em>.</em></p><p>If you enjoy reading these tutorials and want to support me as a writer and creator, then please consider signing up to become a Medium member. It’s $5 a month and you get unlimited access to many thousands of articles on a wide range of topics. If you sign up using <a href=https://andymcdonaldgeo.medium.com/membership><strong>my link</strong></a><strong>,</strong> I will earn a small commission with no extra cost to you!</p><p><a href=https://andymcdonaldgeo.medium.com/membership title=https://andymcdonaldgeo.medium.com/membership><strong>Join Medium with my referral link - Andy McDonald</strong><br>_As a Medium member, a portion of your membership fee goes to writers you read, and you get full access to every story…_andymcdonaldgeo.medium.com</a><a href=https://andymcdonaldgeo.medium.com/membership></a></p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/using-plotly-express-to-create-interactive-scatter-plots-3699d8279b9e/ data-tooltip="Using Plotly Express to Create Interactive Scatter Plots" aria-label="NEXT: Using Plotly Express to Create Interactive Scatter Plots"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/ data-tooltip="Well Log Data Outlier Detection With Machine Learning and Python" aria-label="PREVIOUS: Well Log Data Outlier Detection With Machine Learning and Python"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/",this.page.identifier="/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/"};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="hugo-tranquilpeak-theme",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Andy McDonald. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=2><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/using-plotly-express-to-create-interactive-scatter-plots-3699d8279b9e/ data-tooltip="Using Plotly Express to Create Interactive Scatter Plots" aria-label="NEXT: Using Plotly Express to Create Interactive Scatter Plots"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37/ data-tooltip="Well Log Data Outlier Detection With Machine Learning and Python" aria-label="PREVIOUS: Well Log Data Outlier Detection With Machine Learning and Python"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.andymcdonald.scot/blog/2021/andymcdonaldgeo/visualizing-well-paths-with-the-well-python-library-2104b28e5c3/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label="Leave a comment"><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=2><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fvisualizing-well-paths-with-the-well-python-library-2104b28e5c3%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fvisualizing-well-paths-with-the-well-python-library-2104b28e5c3%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.andymcdonald.scot%2Fblog%2F2021%2Fandymcdonaldgeo%2Fvisualizing-well-paths-with-the-well-python-library-2104b28e5c3%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://www.andymcdonald.scot/images/andy2.png alt="Author's picture"><h4 id=about-card-name>Andy McDonald</h4><div id=about-card-bio>Super bio with markdown support <strong>COOL</strong></div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Petrophysicist, Geoscientist, Data Scientist</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Scotland</div></div></div><div id=cover style=background-image:url(https://www.andymcdonald.scot/images/massimo-botturi-zFYUsLk_50Y-unsplash.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://www.andymcdonald.scot/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script>
<script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(t,e){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(e)})})</script></body></html>